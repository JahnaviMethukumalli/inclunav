{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/home/navigation/src/components/dashboard/global/GlobalView.js\";\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../../../config\";\nimport { connect } from \"react-redux\";\nimport { floorList, imgDetails, getAllBuildingElements, venueList, buildingList, getGpsLocation, globalNavigation, getUserPortfolio, osmRoutes, pickupPoints, navContent, refPoint } from \"../../../store/actions/index\";\nimport BottomBar from \"./BottomBar\";\nimport Instructions from \"./Instructions\";\nimport { getHaversineDistance, distance, obtaincoordinates, findInstructions, simplifyPath } from \"./module\";\nimport { Map as MapContainer, Marker, Popup, TileLayer, GeoJSON } from \"react-leaflet\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport L from \"leaflet\";\nimport hash from \"object-hash\";\nimport \"../../navStyles.css\";\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    background: \"#27282D\",\n    width: \"75%\"\n  },\n  overlay: {\n    zIndex: 9999\n  }\n};\n/**\n * @id  N1.1.1\n * @author Anirudh Khammampati & Sai Kumar Reddy\n * @description Create graph node\n */\n\nvar special = ['base2', 'base1', 'ground', 'first', 'second', 'third', 'fourth', 'fifth', 'sixth', 'seventh', 'eighth', 'ninth', 'tenth', 'eleventh', 'twelvth', 'thirteenth', 'fourteenth', 'fifteenth', 'sixteenth', 'seventeenth', 'eighteenth', 'nineteenth'];\n\nclass PathModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOpenModal = () => {\n      this.setState({\n        open: true\n      });\n    };\n\n    this.onCloseModal = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.state = {\n      open: false,\n      type: \"\",\n      showOption: true,\n      toggle: false,\n      click: false\n    };\n  }\n\n  render() {\n    let {\n      toggle\n    } = this.state;\n\n    if (this.props.dstName !== \"Destination\" && !this.state.click) {\n      toggle = true;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: this.state.open // onAfterOpen = {afterOpenModal}\n        ,\n        onRequestClose: this.onCloseModal,\n        style: customStyles,\n        contentLabel: \"Example Modal\" // open = {this.state.open} onClose={this.onCloseModal}\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 text-center mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              width: \"25\",\n              height: \"25\",\n              src: \"assets/images/saved_address.svg\",\n              alt: \"vew details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 text-white text-center\",\n            children: this.props.destinationVenue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 text-white text-center font-weight-bold\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"h4\",\n              children: \" Please choose the Required Path \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), this.state.showOption ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex-column justify-content-center bg-white rounded\",\n          style: {\n            padding: \"1px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"save-address-box row text-white mt-1 mb-2 ml-1 row\",\n            onClick: () => {},\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 my-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 my-auto\",\n              children: \"Shortest Path\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"save-address-box row text-white mt-1 mb-2 ml-1 row\",\n            onClick: () => {\n              this.setState({\n                type: \"Home\"\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 my-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 my-auto\",\n              children: \"Simplest Path\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"save-address-box row text-white mb-2 ml-1\",\n            onClick: () => {\n              this.setState({\n                type: \"Home\"\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 my-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 my-auto\",\n              children: \"Safest Path\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"save-address-box row text-white mb-2 ml-1\",\n            onClick: () => {\n              this.setState({\n                showOption: false\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 my-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10 my-auto\",\n              children: \"Accesible Path\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control w-100\",\n          placeholder: \"Enter Custom Name\",\n          value: this.state.type,\n          onChange: e => {\n            this.setState({\n              type: e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row w-100 m-0 pb-5 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-language-dark btn-cancel-text mx-auto btn-block btn-default font-weight-bold h2\",\n              onClick: () => {\n                this.onCloseModal();\n              },\n              style: {\n                width: \"84px\",\n                height: \"48px\",\n                float: \"right\"\n              },\n              children: \"CANCEL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n} // import {Graph} from \"./Graph\";\n\n\nclass Graph {\n  // defining vertex array and \n  // adjacent list \n  constructor(noOfVertices) {\n    this.noOfVertices = noOfVertices;\n    this.AdjList = new Map();\n    this.Adjweights = new Map();\n  } // functions to be implemented \n  // addVertex(v) \n\n\n  addVertex(v) {\n    // initialize the adjacent list with a \n    // null array \n    this.AdjList.set(v, []);\n    this.Adjweights.set(v, []);\n  }\n\n  hasvertex(v) {\n    return this.AdjList.has(v);\n  }\n\n  edges(v) {\n    return this.AdjList.get(v);\n  }\n\n  addEdge(v, w, wt, undir) {\n    if (undir) {\n      // get the list for vertex v and put the \n      // vertex w denoting edge between v and w \n      this.AdjList.get(v).push(w);\n      this.Adjweights.get(v).push(wt); // Since graph is undirected, \n      // add an edge from w to v also \n\n      this.AdjList.get(w).push(v);\n      this.Adjweights.get(w).push(wt);\n    } else {\n      this.AdjList.get(v).push(w);\n      this.Adjweights.get(v).push(wt);\n    }\n  } // Prints the vertex and adjacency list \n\n\n  printGraph() {\n    // get all the vertices \n    var get_keys = this.AdjList.keys(); // iterate over the vertices \n\n    for (var i of get_keys) {\n      // great the corresponding adjacency list \n      // for the vertex \n      var get_values = this.AdjList.get(i);\n      var val = this.Adjweights.get(i);\n      var conc = \"\";\n      var conc2 = \"\"; // iterate over the adjacency list \n      // concatenate the values into a string \n\n      for (var j of get_values) conc += j + \" \";\n\n      for (var j of val) conc2 += j + \" \"; // print the vertex and its adjacency list \n\n    }\n  }\n\n}\n/**\n * @id  N1.1.2\n * @author Pankaj Singh\n * @description Global center of osm\n */\n\n\nconst center = {\n  lat: 28.6139,\n  lng: 77.209\n};\n/**\n * @id  N1.1.3\n * @author Pankaj Singh\n * @description OSM Marker List\n */\n\nlet female_toileticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-female awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet male_toileticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-male awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet lifticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-street-view awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet watericon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-glass awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet stairicon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-align-left awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet source = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fas fa-crosshairs awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet destination = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-map-pin awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet doticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div  class='marker-pin1'></div>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nvar myStyle = {\n  //Style to display the non-walkable linestrings\n  color: \"#000000\",\n  weight: 3,\n  opacity: 0.7\n};\n/**\n * @id  N1.1.34\n * @author Pankaj Singh\n * @description Marker\n */\n\nvar myStyle_background = {\n  //Style to display the background tile\n  fillColor: \"#d9d0c9\",\n  fillOpacity: 1,\n  color: \"#d9d0c9\",\n  weight: 2,\n  opacity: 0.1,\n  border: \"none\",\n  width: \"200px\",\n  height: \"200px\"\n};\n\nclass GlobalView extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.getVenueList = (coordinates = null) => {\n      this.props.venueList(() => {\n        this.setState({\n          venueList: this.props.vnList.data\n        });\n      });\n    };\n\n    this.selectedVenue = (venueName, coordinates = null) => {\n      this.setState({\n        selectedVenue: venueName,\n        venueMarker: {\n          lat: coordinates[0],\n          lng: coordinates[1]\n        }\n      }, () => {\n        this.getBuildingList(venueName);\n      });\n    };\n\n    this.getBuildingList = (venueName, coordinates = null) => {\n      this.props.buildingList({\n        venueName: venueName\n      }, () => {\n        this.setState({\n          buildingList: this.props.bldList.data,\n          selectNavigation: true\n        }, () => {\n          let lat = this.state.buildingList[0].lat;\n          let lng = this.state.buildingList[0].lng;\n          const map = this.leafletMap.leafletElement;\n          let bldList = this.state.buildingList;\n          var globalRef = [];\n          this.globalList(bldList, venueName, globalRef);\n          map.flyTo(new L.LatLng(lat, lng), map.getZoom(), {\n            animate: true,\n            duration: 1\n          });\n        });\n      });\n    };\n\n    this.globalList = (bldList, venueName, globalRef) => {\n      bldList.forEach((element, i) => {\n        this.mapReferencePoint(element, element.buildingName, globalRef);\n      });\n    };\n\n    this.mapReferencePoint = (element, buildingName, globalRef) => {\n      let {\n        selectedVenue,\n        dstData\n      } = this.state;\n      this.props.refPoint(selectedVenue, buildingName, \"ground\", () => {\n        globalRef.push({\n          buildingName: buildingName,\n          refPoints: this.props.globalCoords.coordinates\n        });\n        this.setState({\n          glbCoords: this.props.globalCoords.coordinates\n        }, () => {\n          if (globalRef.length === this.state.buildingList.length) {\n            this.setState({\n              globalRefPointsList: globalRef\n            }, () => {\n              let refPoints = this.state.globalRefPointsList;\n              refPoints.forEach(r => {\n                this.createBackgroudLayer(element, r.refPoints, r);\n              });\n            });\n          }\n        });\n      });\n    };\n\n    this.createBackgroudLayer = (element, refPoints, r) => {\n      let arr = refPoints.map(r => {\n        return [parseFloat(r.globalRef.lng), parseFloat(r.globalRef.lat)];\n      });\n      var poly = {\n        // background layer for SIT building\n        type: \"FeatureCollection\",\n        features: [{\n          type: \"Feature\",\n          properties: {},\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [arr]\n          }\n        }]\n      };\n      const map = this.leafletMap.leafletElement;\n      L.geoJson(poly, {\n        style: myStyle_background\n      }).addTo(map);\n      this.setState({\n        backgroundPoly: poly\n      }, () => {\n        let lists = this.state.globalRefPointsList; // lists.forEach(r=>{\n\n        this.props.globalNavigation({\n          venueName: this.state.selectedVenue,\n          buildingName: r.buildingName\n        }, () => {\n          let arr = [];\n          let arr1 = [];\n          this.saveAllLadmark(arr, arr1, element, this.state.buildingList, r.refPoints, r);\n        }); // })\n      });\n    };\n\n    this.saveAllLadmark = (arr, arr1, element, bldList, globalCoords, r) => {\n      let data = this.props.androidNav;\n      let building = r.buildingName;\n      this.props.floorList({\n        venueName: this.state.selectedVenue,\n        buildingName: building\n      }, () => {\n        let flrList = this.props.flrList.data;\n        let length = flrList.length;\n        let sliced = data.slice(data.length - length);\n        data.splice(data.length - length, length);\n        this.buildingPoly.push({\n          building: building,\n          data: sliced\n        });\n        this.venueLandmark.push({\n          building: building,\n          data: data\n        });\n        data.forEach(element => {\n          element.buildingName = building;\n        });\n        let grdData = [];\n        data.forEach(r => {\n          if (r.floor === \"ground\") {\n            grdData.push(r);\n          }\n        });\n        let grdDataPoly = [];\n\n        for (let k = 0; k < sliced.length; k++) {\n          if (sliced[k].floor === \"ground\") {\n            grdDataPoly.push(sliced[k]);\n          }\n        }\n\n        this.handleLocalGlobal(grdData, grdDataPoly, building, globalCoords);\n        arr.push(data);\n        this.distLandmark.push(data);\n\n        if (this.distLandmark.length === bldList.length) {\n          var oldArray = this.distLandmark;\n          let buildingCluster = oldArray.map(r => {\n            return {\n              buildingName: r[0].buildingName,\n              data: r\n            };\n          });\n          var newArray = Array.prototype.concat.apply([], oldArray);\n          this.setState({\n            venueData: arr1,\n            venueNavigation: newArray,\n            buildingCluster: buildingCluster,\n            buildingPolyCluster: this.buildingPoly // landMarks:landMarks,\n            // polygons:polygons\n            // redData: red_data,\n            // polyData: poly_data\n\n          });\n        }\n      });\n    };\n\n    this.handleLocalGlobal = (redData, polyData, buildingName, globalCoords, floor = null) => {\n      let crd = globalCoords;\n      var coords = []; // \"breadth\":\"154\",\"length\":\"173\" , conversion: *3.28084\n\n      this.coordHashMap(crd, coords); // let { redData, polyData } = this.state;\n\n      let red_data = redData;\n      let poly_data = polyData; //finding the point with lowest latitude and highest longitude\n\n      var least_lat = 0;\n      var high_lon = 0; //finding the point with lowest latitude and highest longitude\n\n      least_lat = this.findLeastLat(coords, least_lat); //evaluating high_lon\n\n      var c1 = least_lat === 3 ? 0 : least_lat + 1;\n      var c2 = least_lat === 0 ? 3 : least_lat - 1;\n      var high_lon = coords[c1].lon > coords[c2].lon ? c1 : c2; ///lengths between given 4 global co-ordinates\n\n      var lengths = [];\n      this.betweenLength(coords, lengths); // building angle with equator or true horizontal\n\n      var out = this.buildingAngle(coords, least_lat, high_lon); // Vertical alignment or lift correction\n\n      var diff = []; //array to store offset of each floor\n\n      this.liftCorrection(red_data, diff); // loop to calculate all the coordinates of local points\n\n      var local_coords = {\n        localx: 0,\n        localy: 0\n      };\n      this.coordGlblLandmark(red_data, diff, local_coords, coords, least_lat, high_lon, out); //converting to geoJSON format\n\n      let geoJSON = {\n        type: \"FeatureCollection\",\n        features: []\n      };\n      this.geoJsonLandmark(red_data, geoJSON); ///// nonWalkableGrids Calculations\n\n      var local_coords = {\n        localx: 0,\n        localy: 0\n      };\n      this.coordGlblPolygon(poly_data, local_coords, diff, coords, least_lat, high_lon, out); //converting to geoJSON format\n\n      let geoJSON_poly = {\n        type: \"FeatureCollection\",\n        features: []\n      };\n      this.geoJSONPoly(poly_data, geoJSON_poly);\n      this.landMarks.push({\n        buildingName: buildingName,\n        geoJSON: geoJSON\n      });\n      this.polygons.push({\n        buildingName: buildingName,\n        geoJSONPoly: geoJSON_poly\n      });\n\n      if (this.state.dstName !== \"Destination\" && this.state.dstData.floor === this.state.srcData.floor) {\n        this.setState({\n          landMarks: this.landMarks,\n          polygons: this.polygons,\n          showMarker: true,\n          geoJSON: this.landMarks\n        }, () => {\n          this.singleFloorNav(globalCoords);\n        });\n      } else if (this.state.dstName !== \"Destination\" && this.state.dstData.floor !== this.state.srcData.floor) {\n        if (floor === this.state.srcData.floor) {\n          this.srcFloorPoly = geoJSON_poly;\n          this.srcFloorLandmark = geoJSON;\n        } else {\n          this.dstFloorPoly = geoJSON_poly;\n          this.dstFloorLandmark = geoJSON;\n        }\n      }\n\n      if (!this.state.navigationStrt && this.landMarks.length === this.state.buildingList.length) {\n        this.setState({\n          landMarks: this.landMarks,\n          polygons: this.polygons\n        });\n      } // this.setState({\n      //   // geoJSON: geoJSON,\n      //   // geoJSONPoly: geoJSON_poly,\n      //   currentPos: {\n      //     lat: geoJSON.features[0].properties.latitude,\n      //     lng: geoJSON.features[0].properties.longitude\n      //   }\n      // },()=>{\n      //   // this.singleFloorNav()\n      //   // this.callGlobal(shortestpath)\n      // });\n\n    };\n\n    this.sourceLabel = option => {\n      let resp = \"\";\n\n      if (option.element.type === \"Rooms\") {\n        resp = `${option.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"FloorConnection\") {\n        resp = `${option.properties.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"Services\") {\n        if (option.element.subType === \"beacons\") {\n          resp = ``;\n        } else {\n          resp = `${option.element.subType}(${option.floor},${option.buildingName})`;\n        }\n      } else {\n        resp = \"\";\n      }\n\n      return resp;\n    };\n\n    this.renderSourceMenu = option => {\n      let resp = \"\";\n\n      if (option.element.type === \"Rooms\") {\n        resp = `${option.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"FloorConnection\") {\n        resp = `${option.properties.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"Services\") {\n        if (option.element.subType === \"beacons\") {\n          resp = ``;\n        } else {\n          resp = `${option.element.subType}(${option.floor},${option.buildingName})`;\n        }\n      } else {\n        resp = \"\";\n      }\n\n      if (resp) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mapped-data m-0 \",\n          style: {\n            padding: \"0\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row w-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/inclunav/assets/images/destination2.svg\",\n                  alt: \"destination\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 861,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12\",\n                  children: resp\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 869,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 868,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12 text-capitalize\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 872,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 867,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 858,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 876,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 9\n        }, this);\n      } else {\n        return null;\n      }\n    };\n\n    this.setNavigation = () => {\n      let {\n        srcData,\n        dstData,\n        selectedVenue\n      } = this.state;\n\n      if (srcData.buildingName !== dstData.buildingName) {\n        this.multiBldNav();\n      } else {\n        this.grids_all = []; // this.createGraph()\n\n        let building = this.state.dstData.buildingName;\n        let flrData = this.state.buildingCluster.filter(r => r.buildingName === this.state.dstData.buildingName)[0].data;\n        let polyData = this.state.buildingPolyCluster.filter(r => r.building === this.state.dstData.buildingName)[0].data;\n        let refPoint = this.state.globalRefPointsList.filter(r => r.buildingName === this.state.dstData.buildingName)[0].refPoints;\n\n        if (srcData.floor !== dstData.floor) {\n          this.multiFloorNav();\n        } else {\n          let flrMarkData = [];\n          flrData.forEach(r => {\n            if (r.floor === this.state.dstData.floor) {\n              flrMarkData.push(r);\n            }\n          });\n          let flrDataPoly = [];\n\n          for (let k = 0; k < polyData.length; k++) {\n            if (polyData[k].floor === this.state.dstData.floor) {\n              flrDataPoly.push(polyData[k]);\n            }\n          }\n\n          this.landMarks = [];\n          this.polygons = [];\n          this.handleLocalGlobal(flrMarkData, flrDataPoly, building, refPoint); // this.props.refPoint(\n          // selectedVenue,\n          // this.state.dstData.buildingName,\n          // \"ground\",\n          // () => {\n          // this.props.globalNavigation(\n          //   { venueName: selectedVenue, buildingName: this.state.dstData.buildingName },\n          //   () => {\n          //     this.fltrNvgnData(this.state.dstData.floor)\n          //   }\n          // );\n          //   }\n          // );\n        }\n      }\n    };\n\n    this.multiBldNav = () => {};\n\n    this.multiFloorNav = () => {\n      this.props.getAllBuildingElements({\n        venueName: this.state.selectedVenue,\n        buildingName: this.state.dstData.buildingName\n      }, () => {\n        this.createGraph();\n      });\n    };\n\n    this.fltrNvgnData = floor => {\n      let data = this.props.androidNav;\n      const floors = [...new Set(data.map(s => s.floor))]; //polygon data or nonwalkables of all floors\n\n      var poly_data = data.slice(data.length - floors.length, data.length).filter(r => {\n        return r.floor === floor;\n      }); //reduced data without non walkables\n\n      var red_data = data.slice(0, data.length - floors.length).filter(r => {\n        return r.floor === floor;\n      });\n      this.setState({\n        floor: floors[0],\n        floors: floors,\n        redData: red_data,\n        polyData: poly_data\n      }, () => {\n        this.handleLocalGlobal(); // this.mapReferencePoint()\n        // this.singleFloorNav()\n      });\n    };\n\n    this.getData = building => {\n      let data = {\n        venueName: this.state.selectedVenue,\n        buildingName: building\n      };\n      this.props.floorList(data, () => {\n        let flrList = this.props.flrList.data;\n        this.setState({\n          flrList: flrList,\n          selectedBuilding: building\n        });\n      });\n    };\n\n    this.getCompleteData = floor => {\n      let {\n        selectedVenue,\n        selectedBuilding\n      } = this.state;\n      this.props.globalNavigation({\n        venueName: selectedVenue,\n        buildingName: selectedBuilding\n      }, () => {\n        this.fltrNvgnData(floor);\n      });\n    };\n\n    this.coordHashMap = (crd, coords) => {\n      coords[0] = {\n        lat: parseFloat(crd[0].globalRef.lat),\n        lon: parseFloat(crd[0].globalRef.lng),\n        localx: parseInt(crd[0].localRef.lat),\n        localy: parseInt(crd[0].localRef.lng)\n      };\n      coords[1] = {\n        lat: parseFloat(crd[3].globalRef.lat),\n        lon: parseFloat(crd[3].globalRef.lng),\n        localx: parseInt(crd[3].localRef.lng),\n        localy: parseInt(crd[3].localRef.lat)\n      };\n      coords[2] = {\n        lat: parseFloat(crd[2].globalRef.lat),\n        lon: parseFloat(crd[2].globalRef.lng),\n        localx: parseInt(crd[2].localRef.lng),\n        localy: parseInt(crd[2].localRef.lat)\n      };\n      coords[3] = {\n        lat: parseFloat(crd[1].globalRef.lat),\n        lon: parseFloat(crd[1].globalRef.lng),\n        localx: parseInt(crd[1].localRef.lng),\n        localy: parseInt(crd[1].localRef.lat)\n      };\n    };\n\n    this.findLeastLat = (coords, leastLat) => {\n      for (let i = 0; i < coords.length; i++) {\n        if (coords[i].lat == coords[leastLat].lat) {\n          //handling two points with equal lat\n          if (coords[i].lon > coords[leastLat].lon) {\n            leastLat = i;\n          }\n        } else if (coords[i].lat < coords[leastLat].lat) {\n          leastLat = i;\n        }\n      }\n\n      return leastLat;\n    };\n\n    this.betweenLength = (coords, lengths) => {\n      for (let i = 0; i < coords.length; i++) {\n        var temp1;\n\n        if (i == coords.length - 1) {\n          temp1 = getHaversineDistance(coords[i], coords[0]);\n        } else {\n          temp1 = getHaversineDistance(coords[i], coords[i + 1]);\n        }\n\n        lengths.push(temp1);\n      }\n    };\n\n    this.buildingAngle = (coords, leastLat, highLon) => {\n      let b = getHaversineDistance(coords[leastLat], coords[highLon]);\n      const horizontal = obtaincoordinates(coords[leastLat], 0, b);\n      let c = getHaversineDistance(coords[leastLat], horizontal);\n      let a = getHaversineDistance(coords[highLon], horizontal);\n      let out = Math.acos((b * b + c * c - a * a) / (2 * b * c)) * 180 / Math.PI;\n      return out;\n    };\n\n    this.liftCorrection = (red_data, diff) => {\n      var ground_lift = red_data.filter(x => {\n        return x.element.subType === \"lift\" && x.floor === \"ground\";\n      });\n\n      if (ground_lift.length != 0) {\n        var nth_lift = 0; //loop to find which lift is across more floors\n\n        for (let i = 0; i < ground_lift.length; i++) {\n          var temp = red_data.filter(x => {\n            return x.element.subType === \"lift\" && x.properties.name === ground_lift[i].properties.name;\n          });\n\n          if (temp.length >= red_data.filter(x => {\n            return x.element.subType === \"lift\" && x.properties.name === ground_lift[nth_lift].properties.name;\n          }).length) {\n            nth_lift = i;\n          }\n        }\n\n        var lifts = red_data.filter(x => {\n          return x.element.subType === \"lift\" && x.properties.name === ground_lift[nth_lift].properties.name;\n        });\n\n        for (let i = 0; i < lifts.length; i++) {\n          var temp = {};\n          temp.x = lifts[i].coordinateX - ground_lift[nth_lift].coordinateX;\n          temp.y = lifts[i].coordinateY - ground_lift[nth_lift].coordinateY;\n          temp.floor = lifts[i].floor;\n          diff.push(temp);\n        }\n      }\n    };\n\n    this.coordGlblLandmark = (red_data, diff, local_coords, coords, least_lat, high_lon, out) => {\n      for (let i = 0; i < red_data.length; i++) {\n        if (diff.length > 1) {\n          //vertical correction across floors\n          var test = diff.filter(x => {\n            return x.floor === red_data[i].floor;\n          });\n          local_coords.localx = red_data[i].coordinateX - test[0].x;\n          local_coords.localy = red_data[i].coordinateY - test[0].y;\n        } else {\n          local_coords.localx = red_data[i].coordinateX;\n          local_coords.localy = red_data[i].coordinateY;\n        }\n\n        var l = distance(coords[least_lat], coords[high_lon]);\n        var m = distance(local_coords, coords[high_lon]);\n        var n = distance(coords[least_lat], local_coords);\n        var theta = Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180 / Math.PI;\n\n        if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n          theta = 0;\n        } //staright line case\n\n\n        let ang = theta + out;\n        var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n\n        var ver = dist * Math.sin(ang * Math.PI / 180.0);\n        var hor = dist * Math.cos(ang * Math.PI / 180.0);\n        var final = obtaincoordinates(coords[least_lat], ver, hor);\n        red_data[i].properties.latitude = final.lat;\n        red_data[i].properties.longitude = final.lon;\n      }\n    };\n\n    this.geoJsonLandmark = (red_data, geoJSON) => {\n      for (let i = 0; i < red_data.length; i++) {\n        var p = red_data[i];\n\n        if (p.name === \"\") {\n          //to deal with empty name field\n          p.name = p.properties.name;\n        }\n\n        geoJSON.features.push({\n          type: \"Feature\",\n          properties: {\n            name: p.name,\n            floor: p.floor,\n            type: p.element.subType,\n            floorElement: p.element.type,\n            localx: p.coordinateX,\n            localy: p.coordinateY,\n            ...p.properties\n          },\n          geometry: {\n            type: \"Point\",\n            coordinates: [p.properties.longitude, p.properties.latitude]\n          }\n        });\n      }\n    };\n\n    this.coordGlblPolygon = (poly_data, local_coords, diff, coords, least_lat, high_lon, out) => {\n      for (let k = 0; k < poly_data.length; k++) {\n        var temp2 = [];\n        var floor_length = poly_data[k].properties.floorLength;\n\n        for (let j = 0; j < poly_data[k].properties.clickedPoints.length; j++) {\n          var line = poly_data[k].properties.clickedPoints[j];\n          var numbers = line.split(\",\").map(Number);\n          var temp1 = [];\n\n          for (let i = 0; i < numbers.length; i++) {\n            local_coords.localx = numbers[i] % floor_length;\n            local_coords.localy = numbers[i] / floor_length; //for vertical allignment across floors\n\n            if (diff.length > 1) {\n              var test = diff.filter(x => {\n                return x.floor == poly_data[k].floor;\n              });\n              local_coords.localx = local_coords.localx - test[0].x;\n              local_coords.localy = local_coords.localy - test[0].y;\n            }\n\n            var l = distance(coords[least_lat], coords[high_lon]);\n            var m = distance(local_coords, coords[high_lon]);\n            var n = distance(coords[least_lat], local_coords);\n            var theta = Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180 / Math.PI;\n\n            if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n              theta = 0;\n            } //staright line case\n\n\n            let ang = theta + out;\n            var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n\n            var ver = dist * Math.sin(ang * Math.PI / 180.0);\n            var hor = dist * Math.cos(ang * Math.PI / 180.0);\n            var final = obtaincoordinates(coords[least_lat], ver, hor);\n            var temp = [];\n            temp.push(final.lon, final.lat);\n            temp1.push(temp);\n          }\n\n          temp2.push(temp1);\n        }\n\n        poly_data[k][\"global\"] = temp2;\n      }\n    };\n\n    this.geoJSONPoly = (poly_data, geoJSON_poly) => {\n      for (let j = 0; j < poly_data.length; j++) {\n        for (let i = 0; i < poly_data[j].global.length; i++) {\n          geoJSON_poly.features.push({\n            type: \"Feature\",\n            properties: {\n              floor: poly_data[j].floor\n            },\n            geometry: {\n              type: \"LineString\",\n              coordinates: poly_data[j].global[i]\n            }\n          });\n        }\n      }\n    };\n\n    this.handleCall = (e, position) => {\n      if (String(position.properties.contactNo) === \"null\") {\n        /*to handle null values*/\n        e.preventDefault();\n        alert(` No contact number associated`);\n      } else {\n        window.location.href = \"tel:\" + position.properties.contactNo;\n      }\n    };\n\n    this.handleInternet = (e, position) => {\n      if (String(position.properties.url) === \"null\") {\n        /*to handle null values*/\n        e.preventDefault();\n        alert(` No website associated`);\n      } else {\n        window.open(position.properties.url, \"_blank\"\n        /*Open in a new window.*/\n        );\n      }\n    };\n\n    this.handleWhatsapp = (e, position) => {\n      if (String(position.properties.contactNo) == \"null\") {\n        /*to handle null values*/\n        e.preventDefault();\n        alert(` No whatsapp number associated`);\n      } else {\n        window.open(\"https://api.whatsapp.com/send?phone=\" + position.properties.contactNo, \"_blank\"\n        /*Open in a new window.*/\n        );\n      }\n    };\n\n    this.handleEmail = (e, position) => {\n      if (String(position.properties.email) == \"null\") {\n        /*to handle null values*/\n        e.preventDefault();\n        alert(` No Email associated`);\n      } else {\n        window.location.href = `mailto: ${position.properties.email}`;\n      }\n    };\n\n    this.handleInfo = (e, position) => {\n      const info = \"\\n\" + \"Name :  \" + position.properties.name + \"\\n\" + \"Floor num. :  \" + position.properties.floor + \"\\n\" + \"Contact num. :  \" + position.properties.contactNo + \"\\n\" + \"Timings :  \" + position.properties.startTime + \" - \" + position.properties.endTime;\n      e.preventDefault();\n      alert(` ${info}`);\n    };\n\n    this.singleFloorNav = globalCoords => {\n      this.props.getAllBuildingElements({\n        venueName: this.state.selectedVenue,\n        buildingName: this.state.dstData.buildingName\n      }, () => {\n        // this.setState(\n        //   {\n        //     list: lists\n        //   },\n        //   () => {\n        this.mapBuildingData();\n        let data = {\n          venueName: this.state.selectedVenue,\n          buildingName: this.state.dstData.buildingName\n        };\n        this.props.floorList(data, () => {\n          let flrList = this.props.flrList.data;\n          this.setState({\n            flrList: flrList\n          }, () => {\n            this.handleSubmit(globalCoords);\n          });\n        }); //   }\n        // );\n      });\n    };\n\n    this.createGraph = () => {\n      let building = this.state.dstData.buildingName;\n      let flrList = [];\n      let flrData = this.state.buildingCluster.filter(r => r.buildingName === this.state.dstData.buildingName)[0].data;\n      let polyData = this.state.buildingPolyCluster.filter(r => r.building === this.state.dstData.buildingName)[0].data;\n      let refPoint = this.state.globalRefPointsList.filter(r => r.buildingName === this.state.dstData.buildingName)[0].refPoints;\n      polyData.forEach(r => {\n        flrList.push(r.floor);\n      });\n      let srcFlrMarkData = [];\n      let dstFlrMarkData = [];\n      flrData.forEach(r => {\n        if (r.floor === this.state.srcData.floor) {\n          srcFlrMarkData.push(r);\n        }\n\n        if (r.floor === this.state.dstData.floor) {\n          dstFlrMarkData.push(r);\n        }\n      });\n      let srcFlrDataPoly = [];\n      let dstFlrDataPoly = [];\n\n      for (let k = 0; k < polyData.length; k++) {\n        if (polyData[k].floor === this.state.srcData.floor) {\n          srcFlrDataPoly.push(polyData[k]);\n        }\n\n        if (polyData[k].floor === this.state.dstData.floor) {\n          dstFlrDataPoly.push(polyData[k]);\n        }\n      }\n\n      this.handleLocalGlobal(srcFlrMarkData, srcFlrDataPoly, building, refPoint, this.state.srcData.floor);\n      this.handleLocalGlobal(dstFlrMarkData, dstFlrDataPoly, building, refPoint, this.state.dstData.floor);\n      this.mapBuildingData();\n      this.setState({\n        floorList: flrList,\n        srcFloorPoly: this.srcFloorPoly,\n        geoJSONPoly: this.srcFloorPoly,\n        dstFloorPoly: this.dstFloorPoly,\n        srcFloorLandMark: this.srcFloorLandmark,\n        geoJSON: this.srcFloorLandmark,\n        dstFloorLandMark: this.dstFloorLandmark,\n        currentFloor: this.state.srcData.floor\n      }, () => {\n        this.findpath(refPoint);\n      });\n    };\n\n    this.mapBuildingData = () => {\n      let nodes = this.props.navigationInfo;\n      this.grids_all = [];\n      let lists = [];\n      let num_vert = 0;\n      let fc = new Map();\n\n      for (let i = 0; i < nodes.length; i++) {\n        if (nodes[i].properties.floorElement === \"FloorConnection\") {\n          num_vert++;\n          var v = nodes[i].properties.type + \",\" + nodes[i].properties.name;\n          var val = nodes[i].properties.floor + \",\" + nodes[i].properties.node;\n\n          if (fc.has(v) === false) {\n            fc.set(v, [val]);\n          } else {\n            fc.get(v).push(val);\n          }\n        }\n      }\n\n      this.graph = new Graph(num_vert + 2);\n\n      for (let i = 0; i < nodes.length; i++) {\n        var sel = nodes[i].properties;\n        lists.push(sel);\n\n        if (nodes[i].properties.floorElement === \"FloorConnection\") {\n          var val = nodes[i].properties.floor + \",\" + nodes[i].properties.node;\n          this.graph.addVertex(val);\n        }\n\n        if (nodes[i].properties.floorElement === \"Floor\") {\n          if (nodes[i].properties.length == 8) {\n            var v = nodes[i].properties.frConn[0].split(\",\");\n            var flrmatrix = nodes[i].properties.flr_dist_matrix[0].split(\",\");\n            var len = v.length / 2;\n\n            if (v.length % 2 === 0) {\n              for (var j = 0; j < v.length; j = j + 2) {\n                var val = parseInt(nodes[i].properties.length) * parseInt(v[j + 1]) + parseInt(v[j]);\n                var vert1 = nodes[i].properties.floor + \",\" + val;\n\n                for (var k = j + 2; k < v.length; k = k + 2) {\n                  val = parseInt(nodes[i].properties.length) * parseInt(v[k + 1]) + parseInt(v[k]);\n                  var vert2 = nodes[i].properties.floor + \",\" + val;\n                  this.graph.addEdge(vert1, vert2, flrmatrix[len * (j / 2) + k / 2], true);\n                }\n              }\n            } else {}\n          }\n\n          this.grids_all.push(nodes[i]);\n        }\n      }\n\n      let getKeys = fc.keys();\n\n      for (let i of getKeys) {\n        var get_values = fc.get(i);\n        var cnt = 0;\n        var prev = null;\n\n        for (var j of get_values) {\n          if (cnt > 0) {\n            this.graph.addEdge(prev, j, 0, true);\n            prev = j;\n          }\n\n          if (cnt === 0) {\n            prev = j;\n          }\n\n          cnt++;\n        }\n      }\n    };\n\n    this.handleSubmit = globalCoords => {\n      let {\n        srcData,\n        srcName,\n        dstData,\n        dstName,\n        dstfloorL,\n        dstfloorB\n      } = this.state;\n      let srcVal = \"\";\n      let dstVal = \"\";\n      let srcfloor = \"\";\n      let dstfloor = \"\";\n\n      for (let k = 0; k < this.props.navigationInfo.length; k++) {\n        if (this.props.navigationInfo[k].properties.floorElement !== undefined && this.props.navigationInfo[k].properties.floorElement === \"Rooms\") {\n          if (srcData.name === this.props.navigationInfo[k].properties.roomName) {\n            srcVal = this.props.navigationInfo[k].properties.node;\n            srcfloor = this.props.navigationInfo[k].properties.floor;\n            dstfloor = this.props.navigationInfo[k].properties.floor;\n          }\n\n          if (dstData.name === this.props.navigationInfo[k].properties.roomName) {\n            dstVal = this.props.navigationInfo[k].properties.node;\n          }\n        }\n      }\n\n      let flrList = this.state.buildingPolyCluster.filter((r, i) => {\n        return r.building === this.state.dstData.buildingName;\n      })[0].data;\n      let dstFlrDt = flrList.filter((r, i) => {\n        return r.floor === this.state.dstData.floor;\n      });\n      let srcfloorL = dstFlrDt[0].properties.floorLength;\n      let srcfloorB = dstFlrDt[0].properties.floorBreadth;\n\n      if (srcVal != null && dstVal != null) {\n        let dest_x = this.state.dstData.coordinateX;\n        let dest_y = this.state.dstData.coordinateY;\n\n        if (srcfloor === dstfloor) {\n          this.callwhile(srcfloor, srcVal, srcfloorL, srcfloorB, dest_x, dest_y, true, \"myCanvassrc\", globalCoords);\n          this.setState({\n            samefloor: true\n          });\n        } else {// this.setState({\n          //   samefloor: false,\n          //   buildingView: true\n          // });\n          // this.findpath();\n        }\n      } else {}\n    };\n\n    this.findFloor = (key, array) => {\n      if (array !== undefined) {\n        for (let i = 0; i < array.length; i++) {\n          if (array[i].type) {\n            if (array[i].geomtery.type === \"Polygon\") {\n              if (array[i].properties.floor === key) {\n                return i;\n              }\n            }\n          }\n\n          if (array[i].floor === key) {\n            return i;\n          }\n        }\n      }\n\n      return -1;\n    };\n\n    this.findAccessPath = (paths, srcfloor) => {\n      var weights = [1, 1, 1, 1, 1, 1];\n      var score = [];\n      var protrusion = [];\n      var epi = 0;\n\n      for (let i = 0; i < paths.length; i++) {\n        var points = paths[i];\n        var pro = [0, 0, 0, 0, 0, 0]; //stairs\n\n        for (let j = 0; j < parseInt(this.flrconn.length); j++) {\n          var cord = [parseInt(this.flrconn[j][0]), parseInt(this.flrconn[j][1])];\n\n          if (points.includes(cord)) {\n            pro[0] = pro[0] + 1;\n          }\n        } //turn\n\n\n        for (let j = 1; j < points.length - 1; j++) {\n          var a = points[j - 1][0] - points[j][0];\n          var b = points[j][1] - points[j + 1][1];\n          var c = points[j - 1][1] - points[j][1];\n          var d = points[j][0] - points[j + 1][0];\n\n          if (a * b != c * d) {\n            pro[1] = pro[1] + 1;\n          }\n        } //protrusion\n\n\n        for (let j = 0; j < protrusion.length; j++) {\n          for (let k = 0; j < points.length; k++) {\n            var dist = Math.sqrt((points[k][0] - protrusion[j][0]) * (points[k][0] - protrusion[j][0]) + (points[k][1] - protrusion[j][1]) * (points[k][1] - protrusion[j][1]));\n\n            if (dist < epi) {\n              pro[2] = pro[2] + 1;\n            }\n          }\n        }\n\n        var pathscr = 0;\n\n        for (let j = 0; j < 6; j++) {\n          pathscr = pathscr + weights[j] * pro[j];\n        }\n\n        score.push(pathscr);\n      }\n\n      var min = Number.MAX_VALUE();\n      var index = -1;\n\n      for (let i = 0; i < score.length; i++) {\n        if (score[i] < min) {\n          min = score[i];\n          index = i;\n        }\n      }\n\n      return paths[index];\n    };\n\n    this.findSafePath = (paths, srcfloor) => {\n      var weights = [1, 1, 1, 1, 1, 1];\n      var score = [];\n\n      for (let i = 0; i < paths.length; i++) {\n        var points = paths[i];\n        var props = [0, 0, 0, 0, 0, 0];\n        var protrusion = [];\n        var epi = 0; //stairs\n\n        for (let j = 0; j < parseInt(this.flrconn.length); j++) {\n          var cord = [parseInt(this.flrconn[j][0]), parseInt(this.flrconn[j][1])];\n\n          if (points.includes(cord)) {\n            props[0] = props[0] + 1;\n          }\n        } //turn\n\n\n        for (let j = 1; j < points.length - 1; j++) {\n          var a = points[j - 1][0] - points[j][0];\n          var b = points[j][1] - points[j + 1][1];\n          var c = points[j - 1][1] - points[j][1];\n          var d = points[j][0] - points[j + 1][0];\n\n          if (a * b != c * d) {\n            props[1] = props[1] + 1;\n          }\n        } //protrusion\n\n\n        for (let j = 0; j < protrusion.length; j++) {\n          for (let k = 0; j < points.length; k++) {\n            var dist = Math.sqrt((points[k][0] - protrusion[j][0]) * (points[k][0] - protrusion[j][0]) + (points[k][1] - protrusion[j][1]) * (points[k][1] - protrusion[j][1]));\n\n            if (dist < epi) {\n              props[2] = props[2] + 1;\n            }\n          }\n        }\n\n        var pathscr = 0;\n\n        for (let j = 0; j < 6; j++) {\n          pathscr = pathscr + weights[j] * props[j];\n        }\n\n        score[i] = pathscr;\n      }\n\n      var min = Number.MAX_VALUE();\n      var index = -1;\n\n      for (let i = 0; i < score.length; i++) {\n        if (score[i] < min) {\n          min = score[i];\n          index = i;\n        }\n      }\n\n      return paths[index];\n    };\n\n    this.callwhile_h = (srcfloor, srcVal, m, n, dest_x, dest_y, single, canvasid, globalCoords = null) => {\n      var closed = [];\n\n      for (let i = 0; i < m; i++) {\n        var row = [],\n            row1 = [],\n            row2 = [],\n            row3 = [],\n            row4 = [];\n\n        for (let j = 0; j < n; j++) {\n          row.push(1);\n          row1.push(-1);\n          row3.push(Number.MAX_VALUE);\n          var row5 = [];\n          row4.push(row5);\n        }\n\n        this.shortestpath(row4);\n        this.grids.push(row);\n        this.visited.push(row1);\n        this.minimumcost.push(row3);\n      }\n\n      var ind1 = this.findFloor(srcfloor, this.grids_all);\n\n      if (ind1 !== -1 && this.grids_all[ind1].properties.grid_1 != null) {\n        for (let i = 0; i < this.grids_all[ind1].properties.grid_1.length; i++) {\n          var nodes = this.grid_all[ind1].properties.grid_1[i].split(\",\");\n\n          for (let j = 0; j < nodes.length; j++) {\n            var val = nodes[j];\n            var x = val % m;\n            var y = parseInt(val / m);\n            this.grids[x][y] = 0;\n          }\n        }\n      }\n\n      var src_x = srcVal % m;\n      var src_y = parseInt(srcVal / m);\n      this.leaves.push([src_x, src_y]);\n      this.shortestpath[src_x][src_y].push([src_x, src_y]);\n      this.minimumcost[src_x][src_y] = 0;\n\n      while (this.leaves.length > 0) {\n        var min = Number.MAX_VALUE;\n        var q;\n        var ind;\n\n        for (let i = 0; i < this.leaves.length; i++) {\n          if (min > this.minimumcost[this.leaves[i][0]][this.leaves[i][1]]) {\n            min = this.minimumcost[this.leaves[i][0]][this.leaves[i][1]];\n            q = this.leaves[i];\n          }\n        }\n\n        this.visited[q[0]][q[1]] = 1;\n\n        if (single == true) {\n          if (q[0] == dest_x && q[1] == dest_y) {\n            break;\n          }\n        } else {\n          var check = true;\n\n          for (let i = 0; i < parseInt(this.flrconn.lenght); i++) {\n            if (this.visited[parseInt(this.flrconn[i][0])][parseInt(this.flrconn[i][1])] == -1) {\n              check = false;\n            }\n          }\n\n          if (check == true) {\n            for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n              var vert = srcfloor + \",\" + srcVal + \",\" + \"virtual\";\n              console.log(\"verjsdh1\", vert);\n              this.graph.addEdge(vert, this.flrconn[ch][2], this.minimumcost[parseInt(this.flrconn[ch][0])][parseInt(this.flrconn[ch][1])], true);\n            }\n\n            this.reset_var();\n            break;\n          }\n        }\n\n        this.leaves.splice(ind, 1);\n\n        for (let i = q[0] - 1; i <= q[0] + 1; i++) {\n          for (let j = q[1] - 1; j <= q[1] + 1; j++) {\n            if (i >= 0 && i < m || j >= 0 && j < n) {\n              if (this.visited[i][j] == -1 && this.grids[i][j] == 1) {//A* main part to release closed list and open lists   \n              }\n            }\n          }\n        }\n      }\n    };\n\n    this.callwhile = (srcfloor, srcVal, m, n, dest_x, dest_y, single, canvasid, globalCoords = null) => {\n      var min = Number.MAX_VALUE;\n      var minleave = [];\n      var var_i;\n      var notthere;\n\n      for (let i = 0; i < m; i++) {\n        var row = [],\n            row1 = [],\n            row3 = [],\n            row4 = [];\n\n        for (let j = 0; j < n; j++) {\n          row.push(1);\n          row1.push(-1);\n          row3.push(Number.MAX_VALUE);\n          var row5 = [];\n          row4.push(row5);\n        }\n\n        this.shortestpath.push(row4);\n        this.grids.push(row);\n        this.visited.push(row1);\n        this.minimumcost.push(row3);\n      }\n\n      var ind1 = this.findFloor(srcfloor, this.grids_all);\n\n      if (ind1 !== -1 && this.grids_all[ind1].properties.grid_1 != null) {\n        for (let i = 0; i < this.grids_all[ind1].properties.grid_1.length; i++) {\n          var nodes = this.grids_all[ind1].properties.grid_1[i].split(\",\");\n\n          for (let j = 0; j < nodes.length; j++) {\n            var val = nodes[j];\n            var x = val % m;\n            var y = parseInt(val / m);\n            this.grids[x][y] = 0;\n          }\n        }\n      }\n\n      var src_x = srcVal % m;\n      var src_y = parseInt(srcVal / m);\n      this.leaves.push([src_x, src_y]);\n      this.shortestpath[src_x][src_y].push([src_x, src_y]);\n      this.minimumcost[src_x][src_y] = 0;\n\n      while (this.leaves.length > 0) {\n        min = Number.MAX_VALUE;\n\n        for (let i = 0; i < this.leaves.length; i++) {\n          if (min > this.minimumcost[this.leaves[i][0]][this.leaves[i][1]]) {\n            min = this.minimumcost[this.leaves[i][0]][this.leaves[i][1]];\n            minleave = this.leaves[i];\n            var_i = i;\n          }\n        }\n\n        this.visited[minleave[0]][minleave[1]] = 1;\n\n        if (single == true) {\n          if (minleave[0] == dest_x && minleave[1] == dest_y) {\n            break;\n          }\n        } else {\n          var check = true; //console.log(this.flrconn);\n\n          for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n            if (this.visited[parseInt(this.flrconn[ch][0])][parseInt(this.flrconn[ch][1])] == 1) {} else {\n              check = false;\n            }\n          }\n\n          if (check == true) {\n            for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n              var vert = srcfloor + \",\" + srcVal + \",\" + \"virtual\";\n              console.log(\"verjsdh1\", vert);\n              console.log(this.flrconn[ch][2], this.minimumcost[parseInt(this.flrconn[ch][0])][parseInt(this.flrconn[ch][1])]);\n              this.graph.addEdge(vert, this.flrconn[ch][2], this.minimumcost[parseInt(this.flrconn[ch][0])][parseInt(this.flrconn[ch][1])], true);\n            }\n\n            this.reset_var();\n            break;\n          }\n        }\n\n        this.leaves.splice(var_i, 1);\n\n        for (var j = minleave[0] - 1; j <= minleave[0] + 1; j++) {\n          for (var k = minleave[1] - 1; k <= minleave[1] + 1; k++) {\n            if (j >= 0 && j < m && k >= 0 && k < n) {\n              if (this.visited[j][k] == -1 && this.grids[j][k] == 1 && (j == minleave[0] || k == minleave[1])) {\n                if (this.minimumcost[j][k] > this.minimumcost[minleave[0]][minleave[1]] + Math.abs(minleave[0] - j) + Math.abs(minleave[1] - k) //Math.abs(j-dest_x)+Math.abs(k-dest_y)\n                ) {\n                    this.minimumcost[j][k] = this.minimumcost[minleave[0]][minleave[1]] + Math.abs(minleave[0] - j) + Math.abs(minleave[1] - k); //+Math.abs(j-dest_x)+Math.abs(k-dest_y);\n\n                    this.shortestpath[j][k] = this.shortestpath[minleave[0]][minleave[1]].concat([[j, k]]);\n                    notthere = 1;\n\n                    for (var p = 0; p < this.leaves.length; p++) {\n                      if (this.leaves[p][0] == j && this.leaves[p][1] == k) {\n                        notthere = 0;\n                      }\n                    }\n\n                    if (notthere == 1) {\n                      this.leaves.push([j, k]);\n                    }\n                  }\n              }\n            }\n          }\n        }\n      }\n\n      if (single == true) {\n        let sp = this.shortestpath[dest_x][dest_y];\n        let mypoints = sp.map(r => {\n          return {\n            x: r[0],\n            y: r[1]\n          };\n        });\n        sp = JSON.stringify(sp);\n        var refinedpaths = simplifyPath(mypoints, 2);\n        let {\n          selectedVenue,\n          selectedBuilding\n        } = this.state; // this.props.globalNavigation(\n        // { venueName: selectedVenue, buildingName: this.state.dstData.buildingName },\n        // () => {\n\n        this.callGlobal(sp, srcfloor, globalCoords); // this.fltrNvgnData(floor)\n        // }\n        // );\n\n        let flrData = this.state.buildingCluster.filter(r => r.buildingName === this.state.dstData.buildingName)[0].data;\n        let allElements = flrData;\n\n        if (this.state.srcData.floor === this.state.dstData.floor) {\n          let instructions = findInstructions(sp, refinedpaths, allElements, srcfloor);\n          this.setState({\n            instructions: instructions\n          });\n        } else {\n          let instructions = findInstructions(sp, refinedpaths, allElements, srcfloor);\n\n          if (srcfloor === this.state.srcData.floor) {\n            this.srcFlrInstructions = instructions;\n            this.setState({\n              instructions: instructions\n            });\n          } else {\n            this.dstFlrInstructions = instructions;\n          }\n        } // this.setState({\n        //   instructions: instructions\n        // });\n\n      }\n\n      this.reset_var();\n    };\n\n    this.callGlobal = (shortestpath, srcfloor = null, globalCoords = null) => {\n      let crd = this.props.globalCoords.coordinates;\n\n      if (globalCoords) {\n        crd = globalCoords;\n      }\n\n      var coords = []; // \"breadth\":\"154\",\"length\":\"173\" , conversion: *3.28084\n\n      let sp = JSON.parse(shortestpath);\n      this.defineCoords(crd, coords); //finding the point with lowest latitude and highest longitude\n\n      var least_lat = 0;\n      var high_lon = 0; //finding the point with lowest latitude and highest longitude\n\n      for (let i = 0; i < coords.length; i++) {\n        if (coords[i].lat == coords[least_lat].lat) {\n          //handling two points with equal lat\n          if (coords[i].lon > coords[least_lat].lon) {\n            least_lat = i;\n          }\n        } else if (coords[i].lat < coords[least_lat].lat) {\n          least_lat = i;\n        }\n      } //evaluating high_lon\n\n\n      var c1 = least_lat == 3 ? 0 : least_lat + 1;\n      var c2 = least_lat == 0 ? 3 : least_lat - 1;\n      var high_lon = coords[c1].lon > coords[c2].lon ? c1 : c2;\n      console.log(c1);\n      console.log(c2);\n      console.log(coords[c1].lat);\n      console.log(coords[c2].lon); ///lengths between given 4 global co-ordinates\n\n      var lengths = [];\n\n      for (let i = 0; i < coords.length; i++) {\n        var temp1;\n\n        if (i == coords.length - 1) {\n          temp1 = getHaversineDistance(coords[i], coords[0]);\n        } else {\n          temp1 = getHaversineDistance(coords[i], coords[i + 1]);\n        }\n\n        lengths.push(temp1);\n      } // building angle with equator or true horizontal\n\n\n      var b = getHaversineDistance(coords[least_lat], coords[high_lon]);\n      const horizontal = obtaincoordinates(coords[least_lat], 0, b);\n      var c = getHaversineDistance(coords[least_lat], horizontal);\n      var a = getHaversineDistance(coords[high_lon], horizontal);\n      var out = Math.acos((b * b + c * c - a * a) / (2 * b * c)) * 180 / Math.PI; // Vertical alignment or lift correction\n\n      var diff = []; //array to store offset of each floor\n      // loop to calculate all the coordinates of local points\n\n      var local_coords = {\n        localx: 0,\n        localy: 0\n      };\n      var myarr = JSON.parse(shortestpath); //finding min and max latitude and longitude for the path\n\n      var max_lat = Number.MIN_SAFE_INTEGER;\n      var max_long = Number.MIN_SAFE_INTEGER;\n      var min_lat = Number.MAX_VALUE;\n      var min_long = Number.MAX_VALUE;\n\n      for (let i = 0; i < sp.length; i++) {\n        if (diff.length > 1) {\n          //vertical correction across floors\n          local_coords.localx = sp[i][0];\n          local_coords.localy = sp[i][1];\n        } else {\n          local_coords.localx = sp[i][0];\n          local_coords.localy = sp[i][1];\n        }\n\n        var l = distance(coords[least_lat], coords[high_lon]);\n        var m = distance(local_coords, coords[high_lon]);\n        var n = distance(coords[least_lat], local_coords);\n        var theta = Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180 / Math.PI;\n\n        if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n          theta = 0;\n        } //staright line case\n\n\n        let ang = theta + out;\n        var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n\n        var ver = dist * Math.sin(ang * Math.PI / 180.0);\n        var hor = dist * Math.cos(ang * Math.PI / 180.0);\n        var final = obtaincoordinates(coords[least_lat], ver, hor);\n        myarr[i][0] = final.lat;\n        myarr[i][1] = final.lon;\n        if (max_lat < myarr[i][0]) max_lat = myarr[i][0];\n        if (max_long < myarr[i][1]) max_long = myarr[i][1];\n        if (min_lat > myarr[i][0]) min_lat = myarr[i][0];\n        if (min_long > myarr[i][1]) min_long = myarr[i][1];\n      }\n\n      var mid_lat = (min_lat + max_lat) / 2;\n      var mid_long = (min_long + max_long) / 2;\n      var corner1 = L.latLng(min_lat + 0.0001, min_long + 0.0001);\n      var corner2 = L.latLng(max_lat + 0.0001, max_long + 0.0001);\n      var myBounds = L.latLngBounds(corner1, corner2);\n      var map = this.leafletMap.leafletElement; //console.log(myBounds.getNorthEast());\n      //console.log(min_lat);\n      //console.log(max_lat);\n\n      map.flyTo(new L.latLng(mid_lat, mid_long), 21.6);\n      console.log(map.getZoom()); //map.flyToBounds(myBounds);\n\n      console.log(map.getZoom()); //map.flyTo(new L.LatLng(mid_lat+0.00002,mid_long+0.00001),22.5, {animation : true, duration :1});\n      //console.log(min_long);\n      //console.log(min_lat);\n\n      console.log(map.getZoom()); //converting to geoJSON format\n\n      let geoJSON = {\n        type: \"FeatureCollection\",\n        features: []\n      }; // myarr.shift();\n      // myarr.pop();\n      // myarr.pop();\n\n      for (let i = 0; i < myarr.length; i++) {\n        var p = myarr[i];\n        geoJSON.features.push({\n          type: \"Feature\",\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [p[0], p[1]]\n          }\n        });\n      }\n\n      if (this.state.srcData.floor !== this.state.dstData.floor) {\n        if (srcfloor === this.state.srcData.floor) {\n          this.srcFloorSp = geoJSON;\n        } else {\n          this.dstFloorSp = geoJSON;\n        }\n      } else {\n        this.setState({\n          showpath: true,\n          // showMarker: false,\n          zoom: 19,\n          pathgeoJSON: geoJSON\n        }, () => {// var southWest = L.latLng(src[1], src[0]),\n          // northEast = L.latLng(dst[1], dst[0]),\n          // bounds = L.latLngBounds(southWest, northEast);\n          // map.fitBounds(bounds);\n        });\n      }\n    };\n\n    this.defineCoords = (crd, coords) => {\n      coords[0] = {\n        lat: parseFloat(crd[0].globalRef.lat),\n        lon: parseFloat(crd[0].globalRef.lng),\n        localx: parseInt(crd[0].localRef.lat),\n        localy: parseInt(crd[0].localRef.lng)\n      };\n      coords[1] = {\n        lat: parseFloat(crd[3].globalRef.lat),\n        lon: parseFloat(crd[3].globalRef.lng),\n        localx: parseInt(crd[3].localRef.lng),\n        localy: parseInt(crd[3].localRef.lat)\n      };\n      coords[2] = {\n        lat: parseFloat(crd[2].globalRef.lat),\n        lon: parseFloat(crd[2].globalRef.lng),\n        localx: parseInt(crd[2].localRef.lng),\n        localy: parseInt(crd[2].localRef.lat)\n      };\n      coords[3] = {\n        lat: parseFloat(crd[1].globalRef.lat),\n        lon: parseFloat(crd[1].globalRef.lng),\n        localx: parseInt(crd[1].localRef.lng),\n        localy: parseInt(crd[1].localRef.lat)\n      };\n    };\n\n    this.handleVenueChange = e => {\n      this.setState({\n        buildingList: [],\n        flrList: [],\n        selectedBuilding: \"\",\n        floorSelect: false,\n        selectNavigation: false,\n        geoJSON: [],\n        geoJSONPoly: []\n      }, () => {\n        this.selectedVenue(e[0].venueName, e[0].coordinates);\n      });\n    };\n\n    this.findpath = () => {\n      let srcVal = \"\";\n      let dstVal = \"\";\n      let srcfloor = \"\";\n      let dstfloor = \"\";\n      let srcFloorL = \"\";\n      let srcFloorB = \"\";\n      let dstFloorL = \"\";\n      let dstFloorB = \"\";\n      let building = this.state.dstData.buildingName;\n      let flrData = this.state.buildingCluster.filter(r => r.buildingName === this.state.dstData.buildingName)[0].data;\n      let polyData = this.state.buildingPolyCluster.filter(r => r.building === this.state.dstData.buildingName)[0].data;\n      let refPoint = this.state.globalRefPointsList.filter(r => r.buildingName === this.state.dstData.buildingName)[0].refPoints; // let i = parseInt(gridY) * floorL + parseInt(gridX);\n      // let flrMarkData = []\n      //        flrData.forEach(r=>{\n      //         if(r.floor === this.state.dstData.floor){\n      //           flrMarkData.push(r)\n      //         } \n      //       })\n\n      let flrDataPoly = [];\n\n      for (let k = 0; k < polyData.length; k++) {\n        if (polyData[k].floor === this.state.dstData.floor) {\n          dstFloorL = polyData[k].properties.floorLength;\n          dstFloorB = polyData[k].properties.floorBreadth;\n        }\n\n        if (polyData[k].floor === this.state.srcData.floor) {\n          srcFloorL = polyData[k].properties.floorLength;\n          srcFloorB = polyData[k].properties.floorBreadth;\n        }\n      }\n\n      let {\n        srcData,\n        dstData\n      } = this.state;\n      let srcNode = parseInt(srcData.coordinateY) * srcFloorL + parseInt(srcData.coordinateX);\n      let dstNode = parseInt(dstData.coordinateY) * dstFloorL + parseInt(dstData.coordinateX);\n\n      for (let k = 0; k < flrData.length; k++) {\n        if (flrData[k].floor === this.state.dstData.floor) {\n          dstVal = flrData[k].properties.node;\n        }\n\n        if (flrData[k].floor === this.state.srcData.floor) {\n          srcVal = flrData[k].properties.node;\n        }\n      } // let i = parseInt(gridY) * floorL + parseInt(gridX);\n\n\n      var srcvert = this.state.srcData.floor + \",\" + srcNode + \",\" + \"virtual\";\n      var dstvert = this.state.dstData.floor + \",\" + dstNode + \",\" + \"virtual\";\n\n      if (this.graph.hasvertex(srcvert)) {} else {\n        this.graph.addVertex(srcvert);\n        this.flrconn = [];\n        this.flrind = [];\n        console.log(this.state.srcData.floor);\n\n        for (let k = 0; k < flrData.length; k++) {\n          if (flrData[k].floor === this.state.srcData.floor && flrData[k].element.type === \"FloorConnection\") {\n            // var vert = flrData[k].properties.node\n            var vert = flrData[k].floor + \",\" + flrData[k].properties.node;\n            this.flrconn.push([flrData[k].coordinateX, flrData[k].coordinateY, vert]);\n            this.flrind.push([k, vert]);\n            console.log(this.flrconn);\n          }\n        }\n\n        this.callwhile(this.state.srcData.floor, srcNode, srcFloorL, srcFloorB, null, null, false, null);\n      }\n\n      if (this.graph.hasvertex(dstvert)) {} else {\n        this.graph.addVertex(dstvert);\n        this.flrconn = [];\n\n        for (let k = 0; k < flrData.length; k++) {\n          if (flrData[k].floor === this.state.dstData.floor && flrData[k].element.type === \"FloorConnection\") {\n            var vert = flrData[k].floor + \",\" + flrData[k].properties.node;\n            this.flrind.push([k, vert]);\n            this.flrconn.push([flrData[k].coordinateX, flrData[k].coordinateY, vert]);\n          }\n        }\n\n        console.log(this.flrconn);\n        console.log(this.flrind);\n        this.callwhile(this.state.dstData.floor, dstNode, dstFloorL, dstFloorB, null, null, false, null);\n      }\n\n      this.specialcallwhile(this.state.srcData.floor, srcvert, this.state.dstData.floor, dstvert, refPoint);\n    };\n\n    this.state = {\n      venueList: [],\n      buildingList: [],\n      flrList: [],\n      selectedVenue: \"Select Venue\",\n      selectedBuilding: \"\",\n      geoJSON: [],\n      pathgeoJSON: [],\n      geoJSONPoly: [],\n      showpath: false,\n      landmark: [],\n      landMarks: [],\n      polygons: [],\n      selectNavigation: false,\n      srcFlrInstructions: [],\n      dstFlrInstructions: [],\n      backgroundPoly: {\n        // background layer for SIT building\n        type: \"FeatureCollection\",\n        features: [{\n          type: \"Feature\",\n          properties: {},\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [[[77.19015095013468, 28.545269361046977], [77.19040173667757, 28.54534708573104], [77.19028371948092, 28.54564396115854], [77.19003561514704, 28.545566236693578], [77.19015095013468, 28.545269361046977]]]\n          }\n        }]\n      },\n      floor: \"\",\n      srcName: \"Source\",\n      srcData: [],\n      dstName: \"Destination\",\n      dstData: [],\n      showServices: false,\n      venueMarker: center,\n      floorSelect: false,\n      showMarker: false,\n      showInstructions: false,\n      instructions: [],\n      venueNavigation: [],\n      globalRefPointsList: [],\n      buildingCluster: [],\n      buildingPolyCluster: [],\n      srcFloorSp: [],\n      dstFloorSp: [],\n      srcFloorPoly: [],\n      dstFloorPoly: [],\n      srcFloorLandMark: [],\n      dstFloorLandMark: [],\n      floorList: [],\n      navigationStrt: false,\n      samefloor: true,\n      currentFloor: \"\",\n      zoom: 18\n    };\n    this.shortestPathVar = []; // minpath var \n\n    this.grids_all = [];\n    this.grids = [];\n    this.visited = [];\n    this.shortestpath = [];\n    this.minimumcost = [];\n    this.leaves = [];\n    this.graph = null;\n    this.flrconn = [];\n    this.num_floors = 0;\n    this.landMarks = [];\n    this.polygons = [];\n    this.distLandmark = [];\n    this.venueLandmark = [];\n    this.buildingPoly = [];\n    this.srcFloorSp = [];\n    this.dstFloorSp = [];\n    this.srcFloorPoly = [];\n    this.dstFloorPoly = [];\n    this.srcFloorLandmark = [];\n    this.dstFloorLandmark = [];\n    this.srcFlrInstructions = [];\n    this.dstFlrInstructions = [];\n  }\n  /**\n   * @id  N1.1.2\n   * @author Pankaj Singh\n   * @description Initial rendering of component\n   */\n\n\n  componentDidMount() {\n    this.getVenueList();\n\n    if (window.navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(success => {\n        this.setState({\n          center: {\n            lat: success.coords.latitude,\n            lng: success.coords.longitude\n          },\n          currentPos: {\n            lat: success.coords.latitude,\n            lng: success.coords.longitude\n          }\n        });\n      });\n    }\n  }\n  /**\n   * @id  N1.1.3\n   * @author Pankaj Singh\n   * @description Get venue list\n   */\n\n\n  reset_var() {\n    this.grids = [];\n    this.visited = [];\n    this.shortestpath = [];\n    this.minimumcost = [];\n    this.leaves = [];\n  }\n  /**\n   *@id test 3  \n   *@author Jahnavi Methukumalli\n   *@description Find the safest path between source and destination\n   */\n\n\n  /** \n   *  @id test2\n   * @author Jahnavi Methukumalli\n   * @description Find simplest path between source and dest\n   * \n  */\n  callsimplest(shortestpath, srcVal, dest_x, dest_y) {}\n  /**\n   * @id test 1\n   * @author Jahnavi Methukumalli\n   * @description Find simplest path between source and destination(A*)  \n   */\n\n\n  specialcallwhile(srcfloor, srcvert, dstfloor, dstvert, refPoint) {\n    console.log(\"srcfloor,srcvert,dstfloor,dstvert\", srcfloor, srcvert, dstfloor, dstvert, refPoint);\n    var min = Number.MAX_VALUE;\n    var minleave = null;\n    var var_i;\n    var notthere;\n    let shortestpath = new Map();\n    let visited = new Map();\n    let minimumcost = new Map();\n    let leaves = [];\n    let flrData = this.state.buildingCluster.filter(r => r.buildingName === this.state.dstData.buildingName)[0].data;\n    var get_keys = this.graph.AdjList.keys();\n\n    for (var i of get_keys) {\n      minimumcost.set(i, min);\n      visited.set(i, false);\n    }\n\n    leaves.push(srcvert);\n    shortestpath.set(srcvert, [srcvert]);\n    minimumcost.set(srcvert, 0); // this.graph.printGraph()\n\n    while (leaves.length > 0) {\n      // alert(\"stop \"+leaves.length);\n      min = Number.MAX_VALUE;\n\n      for (let i = 0; i < leaves.length; i++) {\n        if (min > minimumcost.get(leaves[i])) {\n          min = minimumcost.get(leaves[i]);\n          minleave = leaves[i];\n          var_i = i;\n        }\n      }\n\n      visited.set(minleave, true);\n\n      if (minleave == dstvert) {\n        // alert(\" i \"+JSON.stringify(shortestpath.get(dstvert)));\n        break;\n      }\n\n      leaves.splice(var_i, 1);\n      var get_values = this.graph.AdjList.get(minleave);\n      var get_dist = this.graph.Adjweights.get(minleave);\n      var flag = 0;\n\n      for (var jj = 0; jj < get_values.length; jj++) {\n        var j = get_values[jj];\n        console.log(j);\n        var l = j.split(\",\");\n        var neighbour = false;\n\n        if (l.length == 2) {\n          neighbour = true;\n        } else if (l.length == 3) {\n          if (j == dstvert) {\n            neighbour = true;\n          }\n        }\n\n        var dataind = 0;\n\n        for (var kk = 0; kk < this.flrind.length; kk++) {\n          if (String(this.flrind[kk][1]).localeCompare(String(j)) == 0) {\n            dataind = kk;\n          }\n        }\n\n        console.log(dataind);\n        console.log(this.flrind[dataind]);\n        console.log(flrData[this.flrind[dataind][0]].element.subType);\n\n        if (visited.get(j) == false && neighbour && flrData[this.flrind[dataind][0]].element.subType === \"lift\") {\n          console.log(j); //console.log(minleave);\n\n          if (minimumcost.get(j) > minimumcost.get(minleave) + get_dist[jj]) {\n            // console.log(j);\n            minimumcost.set(j, minimumcost.get(minleave) + get_dist[jj]);\n            var dum = [];\n            dum = shortestpath.get(minleave);\n            dum = dum.concat([j]);\n            shortestpath.set(j, dum);\n            notthere = 1;\n\n            for (var p = 0; p < leaves.length; p++) {\n              if (leaves[p] == j) {\n                notthere = 0;\n              }\n            }\n\n            if (notthere == 1) {\n              leaves.push(j);\n            }\n          }\n        }\n      }\n    }\n\n    this.createcanvas(shortestpath.get(dstvert), false, refPoint);\n  }\n\n  createcanvas(list, samefloor, refPoint) {\n    if (samefloor === false) {\n      let ans = new Map();\n\n      for (var i = 0; i < list.length; i++) {\n        var e = list[i].split(\",\");\n\n        if (ans.has(e[0])) {\n          ans.get(e[0]).push(e[1]);\n        } else {\n          ans.set(e[0], [e[1]]);\n        }\n      }\n\n      var get_keys = ans.keys();\n      let clist = [];\n      let floorLlist = [];\n      var cnt = 0;\n\n      for (var i of get_keys) {\n        var ind1 = this.findFloor(i, this.props.flrList);\n        var ind = this.findFloor(i, this.grids_all);\n        floorLlist.push(this.grids_all[ind].properties.length);\n        clist.push({\n          id: cnt,\n          scale: 10,\n          floorL: this.grids_all[ind].properties.length,\n          floorB: this.grids_all[ind].properties.breadth,\n          fileName: this.grids_all[ind].properties.fileName,\n          floor: this.grids_all[ind].properties.floor\n        });\n        cnt++;\n      }\n\n      this.callimage(0, ans, cnt, clist, floorLlist, refPoint);\n    }\n  }\n\n  callimage(cnt, ans, count, clist, floorLlist, refPoint) {\n    let floorList = [this.state.srcData.floor, this.state.dstData.floor];\n\n    for (let jj = 0; jj < floorList.length; jj++) {\n      for (let ii = 0; ii < clist.length; ii++) {\n        if (floorList[jj] === clist[ii].floor) {\n          let i = clist[ii].floor;\n          let me = this;\n          let get_val = ans.get(i);\n          var id = \"canvas\" + ii; // me.loadMultiFloorNonwalkable(id)\n\n          var index = me.findFloor(i, me.grids_all);\n          var m = parseInt(me.grids_all[index].properties.length);\n          var n = parseInt(me.grids_all[index].properties.breadth);\n\n          for (var j = 0; j < get_val.length - 1; j++) {\n            var dest_x = get_val[j + 1] % m;\n            var dest_y = parseInt(get_val[j + 1] / m);\n            console.log(\"i, get_val[j], m, n, dest_x, dest_y, true, id\", i, get_val[j], m, n, dest_x, dest_y, true, id);\n            me.callwhile(i, get_val[j], m, n, dest_x, dest_y, true, id, refPoint);\n          }\n\n          var node_count = 0;\n\n          for (var j of get_val) {\n            if (ii === count - 1) {\n              if (node_count === get_val.length - 1) {//me.color_canvas_spl(j, id, \"green\", floorLlist[ii]);\n              } else {//me.color_canvas_spl(j, id, \"yellow\", floorLlist[ii]);\n                }\n            } else {\n              if (node_count === 0 && ii === 0) {//me.color_canvas_spl(j, id, \"red\", floorLlist[ii]);\n              } else {//me.color_canvas_spl(j, id, \"yellow\", floorLlist[ii]);\n                }\n            }\n\n            node_count++;\n          }\n        }\n      }\n    }\n\n    console.log(\"this.srcFloorSp,this.dstFloorSp\");\n    this.setState({\n      srcFloorSp: this.srcFloorSp,\n      dstFloorSp: this.dstFloorSp,\n      pathgeoJSON: this.srcFloorSp,\n      srcFlrInstructions: this.srcFlrInstructions,\n      dstFlrInstructions: this.dstFlrInstructions,\n      showpath: true\n    });\n  }\n\n  callmark(ans, floorLlist) {\n    var get_keys = ans.keys();\n    var cnt = 0;\n\n    for (var i of get_keys) {\n      var canvasid = \"canvas\" + cnt;\n      var get_val = ans.get(i);\n\n      for (var j of get_val) {\n        this.color_canvas_spl(j, canvasid, \"blue\", floorLlist[cnt]);\n      }\n\n      cnt++;\n    }\n  }\n\n  render() {\n    let srtdFlr = [];\n    var mod = new PathModal();\n    special.forEach((r1, i) => {\n      this.state.floorList && this.state.floorList.forEach(r2 => {\n        if (r1 === r2) {\n          srtdFlr.push(r1);\n        }\n      });\n    });\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        hidden: !this.state.showInstructions,\n        children: /*#__PURE__*/_jsxDEV(Instructions, {\n          dstAddress: this.state.dstAddress,\n          globalTime: this.state.globalTime,\n          globalDistance: this.state.globalDistance,\n          currentLocation: this.state.currentLocation,\n          handleBuildingView: this.handleBuildingView,\n          instructionSet: this.state.instructions,\n          buildingView: this.state.buildingView,\n          sourceLocation: this.state.currentLocation,\n          dstLocation: this.state.dstAddress,\n          dstName: this.state.dstName,\n          srcName: this.state.srcName,\n          handleInstr: () => {\n            this.setState({\n              showInstructions: false\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2568,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2567,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"landing-height\",\n        hidden: this.state.showInstructions,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"src-dst fixed-top\",\n          id: \"src-bar\",\n          style: {\n            height: this.state.selectNavigation === true ? \"167px\" : \"57px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row w-100  mx-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 p-0\",\n              children: /*#__PURE__*/_jsxDEV(Typeahead, {\n                required: true,\n                placeholder: `${this.state.selectedVenue}`,\n                filterBy: [\"venueName\"],\n                labelKey: option => {\n                  return `${option.venueName.split(/(?=[A-Z])/).join(\" \")}`;\n                },\n                onChange: e => {\n                  if (e.length > 0) {\n                    this.handleVenueChange(e);\n                  }\n                },\n                disabled: false,\n                id: \"source\",\n                value: this.state.selectedVenue,\n                options: this.state.venueList,\n                name: \"list\",\n                className: \"mb-2 form-control-dashboard mt-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2598,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2597,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2596,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mx-auto hr-line\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2619,\n            columnNumber: 13\n          }, this), this.state.selectNavigation === true ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row w-100  mx-auto mt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 p-0\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-nvgtn text-white\",\n                  onClick: () => {\n                    this.props.navContent(\"SELECT DESTINATION\", () => {});\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"float-left mt-2 mr-2\",\n                    src: \"/inclunav/assets/images/profile.svg\",\n                    alt: \"user location\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2630,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typeahead, {\n                    required: true,\n                    placeholder: `Select Source`,\n                    filterBy: [\"name\"],\n                    labelKey: option => {\n                      let resp = this.sourceLabel(option);\n                      return resp;\n                    },\n                    renderMenuItemChildren: option => {\n                      return this.renderSourceMenu(option);\n                    },\n                    onChange: e => {\n                      if (e.length > 0) {\n                        this.setState({\n                          srcName: e[0].name + \" \" + e[0].floor + \" \" + e[0].buildingName,\n                          srcData: e[0]\n                        });\n                      }\n                    },\n                    disabled: false,\n                    id: \"source\",\n                    value: this.state.srcName,\n                    options: this.state.venueNavigation,\n                    name: \"list\",\n                    className: \"mb-2 form-control-dashboard mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2635,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2624,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2623,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2622,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-auto hr-line\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2665,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row w-100 mx-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 p-0\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-nvgtn text-white\",\n                  onClick: () => {\n                    this.props.navContent(\"SELECT DESTINATION\", () => {});\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"float-left mt-2 mr-2 my-auto\",\n                    src: \"/inclunav/assets/images/navigation.svg\",\n                    alt: \"select destination\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2674,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typeahead, {\n                    required: true,\n                    placeholder: `Select Destination`,\n                    filterBy: [\"name\"],\n                    labelKey: option => {\n                      let resp = this.sourceLabel(option);\n                      return resp;\n                    },\n                    renderMenuItemChildren: option => {\n                      return this.renderSourceMenu(option);\n                    },\n                    onChange: e => {\n                      if (e.length > 0) {\n                        this.setState({\n                          dstName: e[0].name + \" \" + e[0].floor + \" \" + e[0].buildingName,\n                          dstData: e[0],\n                          navigationStrt: true,\n                          samefloor: e[0].floor !== this.state.srcData.floor ? false : true\n                        }, () => {\n                          // this.mapReferencePoint()\n                          // this.handleLocalGlobal();\n                          mod.render();\n                          mod.onOpenModal();\n                        });\n                      }\n                    },\n                    disabled: false,\n                    id: \"source\",\n                    value: this.state.dstName,\n                    options: this.state.venueNavigation,\n                    name: \"list\",\n                    className: \"mb-2 form-control-dashboard mt-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2679,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2668,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2667,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2666,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2621,\n            columnNumber: 15\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2589,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"btn-group-vertical glbl-btn mr-2\",\n          role: \"group\",\n          \"aria-label\": \"First group\",\n          children: srtdFlr && srtdFlr.map((r, i) => {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\" // className={\"btn btn-secondary\"}                    \n              ,\n              className: this.state.currentFloor === r ? \"btn btn-secondary active active1\" : \"btn btn-secondary\",\n              onClick: () => {\n                this.setState({\n                  currentFloor: r\n                }, () => {\n                  if (this.state.srcData.floor === this.state.currentFloor) {\n                    this.setState({\n                      pathgeoJSON: this.srcFloorSp,\n                      geoJSON: this.state.srcFloorLandMark,\n                      instructions: this.state.srcFlrInstructions\n                    });\n                  } else {\n                    this.setState({\n                      pathgeoJSON: this.dstFloorSp,\n                      geoJSON: this.state.dstFloorLandMark,\n                      instructions: this.state.dstFlrInstructions\n                    }); // srcFloorSp:,\n                    // dstFloorSp:,\n                    // pathgeoJSON:this.srcFloorSp,\n                  }\n                });\n              },\n              children: [\"L\", i]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2731,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2723,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"btn-group-vertical glbl-hm-btn mr-2\",\n          role: \"group\",\n          \"aria-label\": \"First group\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"btn btn-secondary\",\n            onClick: () => {\n              this.props.history.push(\"/navigate\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2776,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2769,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2764,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MapContainer, {\n          style: {\n            height: \"100vh\"\n          },\n          center: center,\n          zoom: this.state.zoom,\n          ref: m => {\n            this.leafletMap = m;\n          },\n          onZoomEnd: e => {\n            // Zoom in & out control\n            if (e.target._zoom < 21.2) {\n              //remove all layers from map\n              this.setState({\n                showpath: false\n              });\n            }\n\n            if (e.target._zoom < 20) {\n              //remove all layers from map\n              this.setState({\n                showMarker: false,\n                showpath: false\n              });\n            }\n\n            if (e.target._zoom < 20) {\n              //remove all layers from map\n              this.setState({\n                showServices: false\n              });\n            } else {} //adding non-room layers beyond 20 zoom\n\n\n            if (e.target._zoom > 19 && !this.state.showpath) {\n              this.setState({\n                showMarker: true\n              });\n            }\n\n            if (e.target._zoom > 21.2 && !this.state.showpath) {\n              this.setState({\n                showpath: true\n              });\n            }\n\n            if (e.target._zoom > 20 && !this.state.showpath) {\n              this.setState({\n                showServices: true\n              });\n            } else {}\n          },\n          children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n            attribution: \"\\xA9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors\",\n            url: \"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n            maxZoom: 25,\n            maxNativeZoom: 19\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2829,\n            columnNumber: 13\n          }, this), this.state.floorSelect ? null : /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: this.state.buildingList && this.state.buildingList.map(r => {\n              return /*#__PURE__*/_jsxDEV(Marker, {\n                position: {\n                  lat: r.lat,\n                  lng: r.lng\n                },\n                onClick: this.getData.bind(this, r.buildingName),\n                children: /*#__PURE__*/_jsxDEV(Popup, {\n                  position: {\n                    lat: r.lat,\n                    lng: r.lng\n                  },\n                  children: [\"Building Name:\", /*#__PURE__*/_jsxDEV(\"pre\", {\n                    children: r.buildingName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2846,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2844,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2840,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2836,\n            columnNumber: 15\n          }, this), this.state.showMarker ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: this.state.geoJSON.features && this.state.geoJSON.features.map((position, idx) => {\n              switch (position.properties.floorElement) {\n                case \"Rooms\":\n                  return /*#__PURE__*/_jsxDEV(Marker, {\n                    position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                    children: /*#__PURE__*/_jsxDEV(Popup, {\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-weight-bold\",\n                        children: position.properties.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2867,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"btn-group btn-block\",\n                        role: \"group\",\n                        \"aria-label\": \"Basic example\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          onClick: e => {\n                            this.handleCall(e, position);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-phone\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2881,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2875,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          onClick: e => {\n                            this.handleInternet(e, position);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-globe\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2889,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2883,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          onClick: e => {\n                            this.handleWhatsapp(e, position);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-whatsapp\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2897,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2891,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          onClick: e => {\n                            this.handleEmail(e, position);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-envelope\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2905,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2899,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          onClick: e => {\n                            this.handleInfo(e, position);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-info\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2913,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2907,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-primary\",\n                          children: /*#__PURE__*/_jsxDEV(\"i\", {\n                            class: \"fa fa-plus-square\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2916,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2915,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2870,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2866,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2860,\n                    columnNumber: 27\n                  }, this);\n\n                case \"Services\":\n                  if (this.state.showServices) {\n                    switch (position.properties.type) {\n                      case \"drinkingWater\":\n                        return /*#__PURE__*/_jsxDEV(Marker, {\n                          position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                          icon: watericon,\n                          children: /*#__PURE__*/_jsxDEV(Popup, {\n                            children: /*#__PURE__*/_jsxDEV(\"span\", {\n                              children: position.properties.name\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2935,\n                              columnNumber: 37\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2934,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2927,\n                          columnNumber: 33\n                        }, this);\n\n                      case \"restRoom\":\n                        switch (position.properties.washroomType) {\n                          case \"Male\":\n                            return /*#__PURE__*/_jsxDEV(Marker, {\n                              position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                              icon: male_toileticon,\n                              children: /*#__PURE__*/_jsxDEV(Popup, {\n                                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                  children: position.properties.name\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 2951,\n                                  columnNumber: 41\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2950,\n                                columnNumber: 39\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2943,\n                              columnNumber: 37\n                            }, this);\n\n                          case \"Female\":\n                            return /*#__PURE__*/_jsxDEV(Marker, {\n                              position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                              icon: female_toileticon,\n                              children: /*#__PURE__*/_jsxDEV(Popup, {\n                                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                  children: position.properties.name\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 2965,\n                                  columnNumber: 41\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2964,\n                                columnNumber: 39\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2957,\n                              columnNumber: 37\n                            }, this);\n\n                          default:\n                            return /*#__PURE__*/_jsxDEV(Marker, {\n                              position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                              children: /*#__PURE__*/_jsxDEV(Popup, {\n                                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                                  children: position.properties.name\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 2978,\n                                  columnNumber: 41\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 2977,\n                                columnNumber: 39\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2971,\n                              columnNumber: 37\n                            }, this);\n                        }\n\n                      default:\n                        return null;\n                    }\n                  }\n\n                  break;\n\n                case \"FloorConnection\":\n                  switch (position.properties.type) {\n                    case \"stairs\":\n                      return /*#__PURE__*/_jsxDEV(Marker, {\n                        position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                        icon: stairicon,\n                        children: /*#__PURE__*/_jsxDEV(Popup, {\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: position.properties.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3000,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2999,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2992,\n                        columnNumber: 31\n                      }, this);\n\n                    case \"lift\":\n                      return /*#__PURE__*/_jsxDEV(Marker, {\n                        position: [position.geometry.coordinates[1], position.geometry.coordinates[0]],\n                        icon: lifticon,\n                        children: /*#__PURE__*/_jsxDEV(Popup, {\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: position.properties.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3014,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3013,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3006,\n                        columnNumber: 31\n                      }, this);\n\n                    default:\n                      return null;\n                  }\n\n                default:\n                  return null;\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2854,\n            columnNumber: 15\n          }, this) : null, this.state.samefloor && this.state.polygons && this.state.polygons.map(r => {\n            return /*#__PURE__*/_jsxDEV(GeoJSON, {\n              data: r.geoJSONPoly\n            }, hash(r.geoJSONPoly), false, {\n              fileName: _jsxFileName,\n              lineNumber: 3034,\n              columnNumber: 22\n            }, this);\n          }), !this.state.samefloor ? /*#__PURE__*/_jsxDEV(GeoJSON, {\n            data: this.state.currentFloor === this.state.srcData.floor ? this.state.srcFloorPoly : this.state.dstFloorPoly\n          }, hash(this.state.currentFloor === this.state.srcData.floor ? this.state.srcFloorPoly : this.state.dstFloorPoly), false, {\n            fileName: _jsxFileName,\n            lineNumber: 3040,\n            columnNumber: 14\n          }, this) : null, this.state.showpath && this.state.pathgeoJSON.features && this.state.pathgeoJSON.features.map((position, idx) => {\n            return /*#__PURE__*/_jsxDEV(Marker, {\n              position: [position.geometry.coordinates[0], position.geometry.coordinates[1]],\n              icon: doticon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3193,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2779,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BottomBar, {\n          srcName: this.state.srcName,\n          dstName: this.state.dstName,\n          dstData: this.state.dstData,\n          handleInstr: () => {\n            this.setState({\n              showInstructions: true\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2587,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2565,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    getImage: state.imgDetails,\n    allNodes: state.getAllElem,\n    flrList: state.floorList,\n    userProfile: state.userPortfolio,\n    navigationInfo: state.navigationInfo,\n    vnList: state.venueList,\n    bldList: state.buildingList,\n    gpsLocation: state.gpsLocation,\n    androidNav: state.globalNavigation,\n    globalRoutes: state.osmRoutes,\n    pickupPoint: state.pickupPoints,\n    currentTab: state.navContent,\n    globalCoords: state.refPoint\n  };\n};\n\nexport default connect(mapStateToProps, {\n  floorList,\n  imgDetails,\n  getAllBuildingElements,\n  venueList,\n  buildingList,\n  getGpsLocation,\n  globalNavigation,\n  getUserPortfolio,\n  osmRoutes,\n  pickupPoints,\n  navContent,\n  refPoint\n})(GlobalView);","map":{"version":3,"sources":["/home/home/navigation/src/components/dashboard/global/GlobalView.js"],"names":["React","Modal","Link","config","connect","floorList","imgDetails","getAllBuildingElements","venueList","buildingList","getGpsLocation","globalNavigation","getUserPortfolio","osmRoutes","pickupPoints","navContent","refPoint","BottomBar","Instructions","getHaversineDistance","distance","obtaincoordinates","findInstructions","simplifyPath","Map","MapContainer","Marker","Popup","TileLayer","GeoJSON","Typeahead","L","hash","customStyles","content","top","left","right","bottom","marginRight","transform","background","width","overlay","zIndex","special","PathModal","Component","constructor","props","onOpenModal","setState","open","onCloseModal","state","type","showOption","toggle","click","render","dstName","destinationVenue","padding","e","target","value","height","float","Graph","noOfVertices","AdjList","Adjweights","addVertex","v","set","hasvertex","has","edges","get","addEdge","w","wt","undir","push","printGraph","get_keys","keys","i","get_values","val","conc","conc2","j","center","lat","lng","female_toileticon","divIcon","className","html","iconSize","iconAnchor","popupAnchor","male_toileticon","lifticon","watericon","stairicon","source","destination","doticon","myStyle","color","weight","opacity","myStyle_background","fillColor","fillOpacity","border","GlobalView","getVenueList","coordinates","vnList","data","selectedVenue","venueName","venueMarker","getBuildingList","bldList","selectNavigation","map","leafletMap","leafletElement","globalRef","globalList","flyTo","LatLng","getZoom","animate","duration","forEach","element","mapReferencePoint","buildingName","dstData","refPoints","globalCoords","glbCoords","length","globalRefPointsList","r","createBackgroudLayer","arr","parseFloat","poly","features","properties","geometry","geoJson","style","addTo","backgroundPoly","lists","arr1","saveAllLadmark","androidNav","building","flrList","sliced","slice","splice","buildingPoly","venueLandmark","grdData","floor","grdDataPoly","k","handleLocalGlobal","distLandmark","oldArray","buildingCluster","newArray","Array","prototype","concat","apply","venueData","venueNavigation","buildingPolyCluster","redData","polyData","crd","coords","coordHashMap","red_data","poly_data","least_lat","high_lon","findLeastLat","c1","c2","lon","lengths","betweenLength","out","buildingAngle","diff","liftCorrection","local_coords","localx","localy","coordGlblLandmark","geoJSON","geoJsonLandmark","coordGlblPolygon","geoJSON_poly","geoJSONPoly","landMarks","polygons","srcData","showMarker","singleFloorNav","srcFloorPoly","srcFloorLandmark","dstFloorPoly","dstFloorLandmark","navigationStrt","sourceLabel","option","resp","name","subType","renderSourceMenu","setNavigation","multiBldNav","grids_all","flrData","filter","multiFloorNav","flrMarkData","flrDataPoly","createGraph","fltrNvgnData","floors","Set","s","getData","selectedBuilding","getCompleteData","parseInt","localRef","leastLat","temp1","highLon","b","horizontal","c","a","Math","acos","PI","ground_lift","x","nth_lift","temp","lifts","coordinateX","y","coordinateY","test","l","m","n","theta","ang","dist","ver","sin","hor","cos","final","latitude","longitude","p","floorElement","temp2","floor_length","floorLength","clickedPoints","line","numbers","split","Number","global","handleCall","position","String","contactNo","preventDefault","alert","window","location","href","handleInternet","url","handleWhatsapp","handleEmail","email","handleInfo","info","startTime","endTime","mapBuildingData","handleSubmit","srcFlrMarkData","dstFlrMarkData","srcFlrDataPoly","dstFlrDataPoly","srcFloorLandMark","dstFloorLandMark","currentFloor","findpath","nodes","navigationInfo","num_vert","fc","node","graph","sel","frConn","flrmatrix","flr_dist_matrix","len","vert1","vert2","getKeys","cnt","prev","srcName","dstfloorL","dstfloorB","srcVal","dstVal","srcfloor","dstfloor","undefined","roomName","dstFlrDt","srcfloorL","srcfloorB","floorBreadth","dest_x","dest_y","callwhile","samefloor","findFloor","key","array","geomtery","findAccessPath","paths","weights","score","protrusion","epi","points","pro","flrconn","cord","includes","d","sqrt","pathscr","min","MAX_VALUE","index","findSafePath","callwhile_h","single","canvasid","closed","row","row1","row2","row3","row4","row5","shortestpath","grids","visited","minimumcost","ind1","grid_1","grid_all","src_x","src_y","leaves","q","ind","check","lenght","ch","vert","console","log","reset_var","minleave","var_i","notthere","abs","sp","mypoints","JSON","stringify","refinedpaths","callGlobal","allElements","instructions","srcFlrInstructions","dstFlrInstructions","parse","defineCoords","myarr","max_lat","MIN_SAFE_INTEGER","max_long","min_lat","min_long","mid_lat","mid_long","corner1","latLng","corner2","myBounds","latLngBounds","srcFloorSp","dstFloorSp","showpath","zoom","pathgeoJSON","handleVenueChange","floorSelect","srcFloorL","srcFloorB","dstFloorL","dstFloorB","srcNode","dstNode","srcvert","dstvert","flrind","specialcallwhile","landmark","showServices","showInstructions","shortestPathVar","num_floors","componentDidMount","navigator","geolocation","getCurrentPosition","success","currentPos","callsimplest","get_dist","flag","jj","neighbour","dataind","kk","localeCompare","dum","createcanvas","list","ans","clist","floorLlist","id","scale","floorL","floorB","breadth","fileName","callimage","count","ii","me","get_val","node_count","callmark","color_canvas_spl","srtdFlr","mod","r1","r2","dstAddress","globalTime","globalDistance","currentLocation","handleBuildingView","buildingView","join","history","_zoom","bind","idx","washroomType","mapStateToProps","getImage","allNodes","getAllElem","userProfile","userPortfolio","gpsLocation","globalRoutes","pickupPoint","currentTab"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Modal from \"react-modal\";\nimport { Link } from \"react-router-dom\";\nimport config from \"../../../config\";\nimport { connect } from \"react-redux\";\nimport {\n  floorList,\n  imgDetails,\n  getAllBuildingElements,\n  venueList,\n  buildingList,\n  getGpsLocation,\n  globalNavigation,\n  getUserPortfolio,\n  osmRoutes,\n  pickupPoints,\n  navContent,\n  refPoint\n} from \"../../../store/actions/index\";\nimport BottomBar from \"./BottomBar\";\nimport Instructions from \"./Instructions\";\nimport {\n  getHaversineDistance,\n  distance,\n  obtaincoordinates,\n  findInstructions,\n  simplifyPath\n} from \"./module\";\nimport {\n  Map as MapContainer,\n  Marker,\n  Popup,\n  TileLayer,\n  GeoJSON\n} from \"react-leaflet\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport L from \"leaflet\";\nimport hash from \"object-hash\";\nimport \"../../navStyles.css\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    background: \"#27282D\",\n    width: \"75%\"\n  },\n  overlay: { zIndex: 9999 }\n};\n\n/**\n * @id  N1.1.1\n * @author Anirudh Khammampati & Sai Kumar Reddy\n * @description Create graph node\n */\n\nvar special = ['base2','base1','ground','first', 'second', 'third', 'fourth', 'fifth', 'sixth', 'seventh', 'eighth', 'ninth', 'tenth', 'eleventh', 'twelvth', 'thirteenth', 'fourteenth', 'fifteenth', 'sixteenth', 'seventeenth', 'eighteenth', 'nineteenth'];\n\n\nclass PathModal extends React.Component{\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      type: \"\",\n      showOption: true,\n      toggle: false,\n      click:false\n    };\n  }\n  \n  onOpenModal = () => {\n    this.setState({ open: true });\n  };\n\n  onCloseModal = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    let {toggle} = this.state;\n    if((this.props.dstName !== \"Destination\") && !this.state.click){\n        toggle  = true\n    }\n\n    return (\n      <div>\n        <Modal\n          isOpen={this.state.open}\n          // onAfterOpen = {afterOpenModal}\n          onRequestClose={this.onCloseModal}\n          style={customStyles}\n          contentLabel=\"Example Modal\"\n          // open = {this.state.open} onClose={this.onCloseModal}\n        >\n          <div className=\"row\">\n            <div className=\"col-12 text-center mt-4\">\n              <img\n                width=\"25\"\n                height=\"25\"\n                src=\"assets/images/saved_address.svg\"\n                alt=\"vew details\"\n              />\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-12 text-white text-center\">\n              {this.props.destinationVenue}\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-12 text-white text-center font-weight-bold\">\n              <p className=\"h4\"> Please choose the Required Path </p>\n            </div>\n          </div>\n\n          {this.state.showOption ? (\n            <div\n              className=\"d-flex-column justify-content-center bg-white rounded\"\n              style={{ padding: \"1px\" }}\n            >\n              <div\n                className=\"save-address-box row text-white mt-1 mb-2 ml-1 row\"\n                onClick={() => {\n\n                }}\n              >\n                <div className=\"col-2 my-auto\">\n                </div>\n                <div className=\"col-10 my-auto\">Shortest Path</div>\n              </div>\n              <div\n                className=\"save-address-box row text-white mt-1 mb-2 ml-1 row\"\n                onClick={() => {\n                  this.setState({\n                    type: \"Home\"\n                  });\n                }}\n              >\n                <div className=\"col-2 my-auto\">\n                </div>\n                <div className=\"col-10 my-auto\">Simplest Path</div>\n              </div>\n              <div\n                className=\"save-address-box row text-white mb-2 ml-1\"\n                onClick={() => {\n                  this.setState({\n                    type: \"Home\"\n                  });\n                }}\n              >\n                <div className=\"col-2 my-auto\">\n\n                </div>\n                <div className=\"col-10 my-auto\">Safest Path</div>\n              </div>\n              \n              <div\n                className=\"save-address-box row text-white mb-2 ml-1\"\n                onClick={() => {\n                  this.setState({\n                    showOption: false\n                  });\n                }}\n              >\n                <div className=\"col-2 my-auto\">\n                </div>\n                <div className=\"col-10 my-auto\">Accesible Path</div>\n              </div>\n            </div>\n          ) : (\n            <input\n              type=\"text\"\n              className=\"form-control w-100\"\n              placeholder=\"Enter Custom Name\"\n              value={this.state.type}\n              onChange={e => {\n                this.setState({\n                  type: e.target.value\n                });\n              }}\n            />\n          )}\n\n          <div className=\"row w-100 m-0 pb-5 mt-2\">\n            <div className=\"col-6\">\n            </div>\n            <div className=\"col-6\">\n              <button\n                className={\n                  \"btn btn-language-dark btn-cancel-text mx-auto btn-block btn-default font-weight-bold h2\"\n                }\n                onClick={() => {\n                  this.onCloseModal();\n                }}\n                style={{\n                  width: \"84px\",\n                  height: \"48px\",\n                  float: \"right\"\n                }}\n              >\n                CANCEL\n              </button>\n            </div>\n          </div>\n        </Modal>\n        </div>)\n    }\n\n}\n\n\n\n// import {Graph} from \"./Graph\";\nclass Graph { \n  // defining vertex array and \n  // adjacent list \n  constructor(noOfVertices) \n  { \n      this.noOfVertices = noOfVertices; \n      this.AdjList = new Map(); \n      this.Adjweights = new Map();\n  } \n\n  // functions to be implemented \n\n  // addVertex(v) \n  addVertex(v) \n  { \n      // initialize the adjacent list with a \n      // null array \n      this.AdjList.set(v, []); \n      this.Adjweights.set(v,[]);\n  } \n  hasvertex(v){\n    return this.AdjList.has(v);\n  }\n  edges(v){\n    return this.AdjList.get(v);\n  }\n  addEdge(v, w, wt,undir) \n  { \n      if(undir){\n\n        // get the list for vertex v and put the \n        // vertex w denoting edge between v and w \n        this.AdjList.get(v).push(w); \n        this.Adjweights.get(v).push(wt);\n        // Since graph is undirected, \n        // add an edge from w to v also \n        this.AdjList.get(w).push(v); \n        this.Adjweights.get(w).push(wt);\n      }\n      else{\n        this.AdjList.get(v).push(w); \n        this.Adjweights.get(v).push(wt);\n      }\n  }\n\n  // Prints the vertex and adjacency list \n  printGraph() \n  { \n      // get all the vertices \n      var get_keys = this.AdjList.keys(); \n\n    \n      // iterate over the vertices \n      for (var i of get_keys)  \n  { \n          // great the corresponding adjacency list \n          // for the vertex \n          var get_values = this.AdjList.get(i);\n\n          var val = this.Adjweights.get(i); \n          var conc = \"\"; \n          var conc2 = \"\"; \n    \n          // iterate over the adjacency list \n          // concatenate the values into a string \n          for (var j of get_values) \n              conc += j + \" \"; \n          for (var j of val) \n            conc2 += j + \" \";\n          // print the vertex and its adjacency list \n      } \n  }\n} \n/**\n * @id  N1.1.2\n * @author Pankaj Singh\n * @description Global center of osm\n */\nconst center = { lat: 28.6139, lng: 77.209 };\n/**\n * @id  N1.1.3\n * @author Pankaj Singh\n * @description OSM Marker List\n */\nlet female_toileticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-female awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nlet male_toileticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-male awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nlet lifticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-street-view awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet watericon = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-glass awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\nlet stairicon = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-align-left awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nlet source = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fas fa-crosshairs awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nlet destination = L.divIcon({\n  className: \"custom-div-icon\",\n  html:\n    \"<div style='background-color:#4b85bb;' class='marker-pin'></div><i class='fa fa-map-pin awesome'>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nlet doticon = L.divIcon({\n  className: \"custom-div-icon\",\n  html: \"<div  class='marker-pin1'></div>\",\n  iconSize: [30, 42],\n  iconAnchor: [15, 42],\n  popupAnchor: [0, -30]\n});\n\nvar myStyle = {\n  //Style to display the non-walkable linestrings\n  color: \"#000000\",\n  weight: 3,\n  opacity: 0.7\n};\n/**\n * @id  N1.1.34\n * @author Pankaj Singh\n * @description Marker\n */\nvar myStyle_background = {\n  //Style to display the background tile\n  fillColor: \"#d9d0c9\",\n  fillOpacity: 1,\n  color: \"#d9d0c9\",\n  weight: 2,\n  opacity: 0.1,\n  border: \"none\",\n  width: \"200px\",\n  height: \"200px\"\n};\n\nclass GlobalView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      venueList: [],\n      buildingList: [],\n      flrList: [],\n      selectedVenue: \"Select Venue\",\n      selectedBuilding: \"\",\n      geoJSON: [],\n      pathgeoJSON: [],\n      geoJSONPoly: [],\n      showpath: false,\n      landmark: [],\n      landMarks:[],\n      polygons:[],\n      selectNavigation: false,\n      srcFlrInstructions:[],\n      dstFlrInstructions:[],\n      backgroundPoly: {\n        // background layer for SIT building\n        type: \"FeatureCollection\",\n        features: [\n          {\n            type: \"Feature\",\n            properties: {},\n            geometry: {\n              type: \"Polygon\",\n              coordinates: [\n                [\n                  [77.19015095013468, 28.545269361046977],\n                  [77.19040173667757, 28.54534708573104],\n                  [77.19028371948092, 28.54564396115854],\n                  [77.19003561514704, 28.545566236693578],\n                  [77.19015095013468, 28.545269361046977]\n                ]\n              ]\n            }\n          }\n        ]\n      },\n      floor: \"\",\n      srcName: \"Source\",\n      srcData: [],\n      dstName: \"Destination\",\n      dstData: [],\n      showServices: false,\n      venueMarker: center,\n      floorSelect: false,\n      showMarker: false,\n      showInstructions: false,\n      instructions: [],\n      venueNavigation: [],\n      globalRefPointsList:[],\n      buildingCluster:[],\n      buildingPolyCluster:[],\n      srcFloorSp:[],\n      dstFloorSp:[],\n      srcFloorPoly:[],\n      dstFloorPoly:[],\n      srcFloorLandMark:[],\n      dstFloorLandMark:[],\n      floorList:[],\n      navigationStrt:false,\n      samefloor:true,\n      currentFloor:\"\",\n      zoom: 18\n    };\n    this.shortestPathVar = [];\n    // minpath var \n    this.grids_all=[];\n    this.grids=[];\n    this.visited=[];\n    this.shortestpath =[];\n    this.minimumcost=[];\n    this.leaves=[];\n    this.graph = null;\n    this.flrconn = [];\n    this.num_floors=0;\n    \n    this.landMarks = [];\n    this.polygons = [];\n    this.distLandmark = [];\n    this.venueLandmark = [];\n    this.buildingPoly = [];\n    this.srcFloorSp = [];\n    this.dstFloorSp = [];\n    this.srcFloorPoly = [];\n    this.dstFloorPoly = [];\n    this.srcFloorLandmark = [];\n    this.dstFloorLandmark = [];\n    this.srcFlrInstructions = [];\n    this.dstFlrInstructions = [];\n  }\n  /**\n   * @id  N1.1.2\n   * @author Pankaj Singh\n   * @description Initial rendering of component\n   */\n  componentDidMount() {\n    this.getVenueList();\n    if (window.navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(success => {\n        this.setState({\n          center: {\n            lat: success.coords.latitude,\n            lng: success.coords.longitude\n          },\n          currentPos: {\n            lat: success.coords.latitude,\n            lng: success.coords.longitude\n          }\n        });\n      });\n    }\n  }\n  /**\n   * @id  N1.1.3\n   * @author Pankaj Singh\n   * @description Get venue list\n   */\n  getVenueList = (coordinates = null) => {\n    this.props.venueList(() => {\n      this.setState({\n        venueList: this.props.vnList.data\n      });\n    });\n  };\n  /**\n   * @id  N1.1.4\n   * @author Pankaj Singh\n   * @param venueName\n   * @description Select venue\n   */\n  selectedVenue = (venueName, coordinates = null) => {\n    this.setState(\n      {\n        selectedVenue: venueName,\n        venueMarker: { lat: coordinates[0], lng: coordinates[1] }\n      },\n      () => {\n        this.getBuildingList(venueName);\n      }\n    );\n  };\n  /**\n   * @id  N1.1.5\n   * @param venueName\n   * @author Pankaj Singh\n   * @description get building list\n   */\n  getBuildingList = (venueName, coordinates = null) => {\n    this.props.buildingList({ venueName: venueName }, () => {\n      this.setState(\n        {\n          buildingList: this.props.bldList.data,\n          selectNavigation:true\n        },\n        () => {\n          let lat = this.state.buildingList[0].lat;\n          let lng = this.state.buildingList[0].lng;\n          const map = this.leafletMap.leafletElement;\n          let bldList = this.state.buildingList;\n          var globalRef = [];\n          this.globalList(bldList,venueName,globalRef);\n          map.flyTo(new L.LatLng(lat, lng), map.getZoom(), {\n            animate: true,\n            duration: 1\n          });\n        }\n      );\n    });\n  };\n\n    /**\n   * @id  N1.1.10\n   * @author Pankaj Singh\n   * @param bldList\n   * @param venueName\n   * @description get all landmark within venue\n   */\n  globalList = (bldList, venueName,globalRef) => {\n    bldList.forEach((element, i) => {\n      this.mapReferencePoint(element,element.buildingName,globalRef)\n    });\n  };\n\n      /**\n   * @id  N1.1.6\n   * @author Ushaswini Chintha\n   * @param floor\n   * @description Get global reference point of ground floor of a building\n   */\n  mapReferencePoint = (element,buildingName,globalRef)=>{\n    let { selectedVenue, dstData } = this.state;\n    this.props.refPoint(\n      selectedVenue,\n      buildingName,\n      \"ground\",\n      () => {\n        globalRef.push({buildingName:buildingName,refPoints:this.props.globalCoords.coordinates})\n        this.setState(\n          {\n            glbCoords: this.props.globalCoords.coordinates\n          },\n          () => {\n            if(globalRef.length === this.state.buildingList.length){\n              this.setState({\n                globalRefPointsList:globalRef\n              },()=>{\n                let refPoints = this.state.globalRefPointsList;\n                refPoints.forEach(r=>{\n                  this.createBackgroudLayer(element,r.refPoints,r)\n                })\n              })\n            }\n          }\n        );\n      }\n    );\n  }\n  /**\n   * @id  N1.1.7\n   * @author Ushaswini Chintha\n   * @description Create Backround layer of building\n   */\n  createBackgroudLayer = (element,refPoints,r)=>{\n    let arr = refPoints.map(r => {\n      return [\n        parseFloat(r.globalRef.lng),\n        parseFloat(r.globalRef.lat)\n      ];\n    });\n    var poly = {\n      // background layer for SIT building\n      type: \"FeatureCollection\",\n      features: [\n        {\n          type: \"Feature\",\n          properties: {},\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [\n              arr\n            ]\n          }\n        }\n      ]\n    };\n    const map = this.leafletMap.leafletElement;\n    L.geoJson(poly, { style: myStyle_background }).addTo(map);\n    this.setState({\n      backgroundPoly: poly\n    },()=>{\n      let lists = this.state.globalRefPointsList;\n      // lists.forEach(r=>{\n        this.props.globalNavigation(\n          { venueName: this.state.selectedVenue, buildingName: r.buildingName },\n          () => {\n            let arr = [];\n            let arr1 = [];\n            this.saveAllLadmark(arr,arr1,element,this.state.buildingList,r.refPoints,r)\n          }\n        );\n      // })\n    });\n  }\n/**\n   * @id  N1.1.11\n   * @param arr\n   * @param element\n   * @param bldList\n   * @author Pankaj Singh\n   * @description get all landmakr withing venue\n  */\n  saveAllLadmark = (arr,arr1,element,bldList,globalCoords,r)=>{\n    let data = this.props.androidNav;\n    let building = r.buildingName;\n    this.props.floorList(\n      { venueName: this.state.selectedVenue, buildingName: building },\n      () => {\n        let flrList = this.props.flrList.data;\n        let length = flrList.length;\n        let sliced = data.slice(data.length - length)\n        data.splice(\n          data.length - length,\n          length\n        );\n        this.buildingPoly.push({building:building,data:sliced})\n        this.venueLandmark.push({building:building,data:data})\n        data.forEach((element)=> {\n          element.buildingName = building;\n        });\n        let grdData = []\n         data.forEach(r=>{\n          if(r.floor === \"ground\"){\n            grdData.push(r)\n          } \n        })\n        let grdDataPoly = []\n        for(let k=0;k<sliced.length;k++){\n            if(sliced[k].floor === \"ground\"){\n              grdDataPoly.push(sliced[k])\n            } \n        }\n        this.handleLocalGlobal(grdData,grdDataPoly,building,globalCoords)\n        arr.push(data);\n        this.distLandmark.push(data)\n        if (this.distLandmark.length === bldList.length) {\n          var oldArray = this.distLandmark;\n          let buildingCluster = oldArray.map(r=>{\n            return {buildingName:r[0].buildingName,data:r}\n          })\n           var newArray = Array.prototype.concat.apply([], oldArray);\n           this.setState({\n            venueData:arr1,\n            venueNavigation: newArray,\n            buildingCluster:buildingCluster,\n            buildingPolyCluster:this.buildingPoly\n            // landMarks:landMarks,\n            // polygons:polygons\n            // redData: red_data,\n            // polyData: poly_data\n          });\n        }\n      }\n    );\n  }\n /**\n   * @id  N1.1.14\n   * @author Ushaswini Chintha\n   * @description convert local floor element and non walkables coordinates to global coordinates\n   */\n  handleLocalGlobal = (redData,polyData,buildingName,globalCoords,floor =null) => {\n    let crd = globalCoords;\n    var coords = []; // \"breadth\":\"154\",\"length\":\"173\" , conversion: *3.28084\n    this.coordHashMap(crd,coords)\n    // let { redData, polyData } = this.state;\n    let red_data = redData;\n    let poly_data = polyData;\n    //finding the point with lowest latitude and highest longitude\n    var least_lat = 0;\n    var high_lon = 0;\n    //finding the point with lowest latitude and highest longitude\n    least_lat = this.findLeastLat(coords,least_lat)\n    //evaluating high_lon\n    var c1 = least_lat === 3 ? 0 : least_lat + 1;\n    var c2 = least_lat === 0 ? 3 : least_lat - 1;\n    var high_lon = coords[c1].lon > coords[c2].lon ? c1 : c2;\n    ///lengths between given 4 global co-ordinates\n    var lengths = [];\n    this.betweenLength(coords,lengths)  \n    // building angle with equator or true horizontal\n   var out =  this.buildingAngle(coords,least_lat,high_lon)\n    // Vertical alignment or lift correction\n    var diff = []; //array to store offset of each floor\n    this.liftCorrection(red_data,diff)\n    // loop to calculate all the coordinates of local points\n    var local_coords = { localx: 0, localy: 0 };\n    this.coordGlblLandmark(red_data,diff,local_coords,coords,least_lat,high_lon,out)\n    //converting to geoJSON format\n    let geoJSON = {\n      type: \"FeatureCollection\",\n      features: []\n    };\n    this.geoJsonLandmark(red_data,geoJSON) \n    ///// nonWalkableGrids Calculations\n    var local_coords = { localx: 0, localy: 0 };\n    this.coordGlblPolygon(poly_data,local_coords,diff,coords,least_lat,high_lon,out)\n    //converting to geoJSON format\n    let geoJSON_poly = {\n      type: \"FeatureCollection\",\n      features: []\n    };\n    this.geoJSONPoly(poly_data,geoJSON_poly) \n    this.landMarks.push({buildingName:buildingName,geoJSON:geoJSON})\n    this.polygons.push({buildingName:buildingName,geoJSONPoly: geoJSON_poly})\n    if(this.state.dstName !== \"Destination\" && (this.state.dstData.floor === this.state.srcData.floor)){\n      this.setState({\n        landMarks:this.landMarks,\n        polygons:this.polygons,\n        showMarker:true,\n        geoJSON:this.landMarks\n      },()=>{\n        this.singleFloorNav(globalCoords)\n      })\n    }else if(this.state.dstName !== \"Destination\" && (this.state.dstData.floor !== this.state.srcData.floor)){\n      if(floor === this.state.srcData.floor){\n        this.srcFloorPoly = geoJSON_poly\n        this.srcFloorLandmark = geoJSON\n      }else{\n        this.dstFloorPoly = geoJSON_poly\n        this.dstFloorLandmark = geoJSON\n      }\n    }\n    if(!this.state.navigationStrt && this.landMarks.length === this.state.buildingList.length){\n      this.setState({\n        landMarks:this.landMarks,\n        polygons:this.polygons\n      })\n    }\n    // this.setState({\n    //   // geoJSON: geoJSON,\n    //   // geoJSONPoly: geoJSON_poly,\n    \n    //   currentPos: {\n    //     lat: geoJSON.features[0].properties.latitude,\n    //     lng: geoJSON.features[0].properties.longitude\n    //   }\n    // },()=>{\n    //   // this.singleFloorNav()\n    //   // this.callGlobal(shortestpath)\n    // });\n  };\n  /**\n   * @id  N1.1.6\n   * @param option\n   * @author Pankaj Singh\n   * @description option from venue details\n   */\n  sourceLabel = option => {\n    let resp = \"\";\n    if (option.element.type === \"Rooms\") {\n      resp = `${option.name}(${option.floor},${option.buildingName})`;\n    } else if (option.element.type === \"FloorConnection\") {\n      resp = `${option.properties.name}(${option.floor},${option.buildingName})`;\n    } else if (option.element.type === \"Services\") {\n      if (option.element.subType === \"beacons\") {\n        resp = ``;\n      } else {\n        resp = `${option.element.subType}(${option.floor},${option.buildingName})`;\n      }\n    } else {\n      resp = \"\";\n    }\n    return resp;\n  };\n  /**\n   * @id  N1.1.7\n   * @param option\n   * @author Pankaj Singh\n   * @description UI for menu of typeahead\n   */\n  renderSourceMenu = option => {\n    let resp = \"\";\n      if (option.element.type === \"Rooms\") {\n        resp = `${option.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"FloorConnection\") {\n        resp = `${option.properties.name}(${option.floor},${option.buildingName})`;\n      } else if (option.element.type === \"Services\") {\n        if (option.element.subType === \"beacons\") {\n          resp = ``;\n        } else {\n          resp = `${option.element.subType}(${option.floor},${option.buildingName})`;\n        }\n      } else {\n        resp = \"\";\n      }\n    if (resp) {\n      return (\n        <div className=\"mapped-data m-0 \" style={{ padding: \"0\" }}>\n          <div className=\"row w-100\">\n            <div className=\"col-2\">\n              <div>\n                <img\n                  src=\"/inclunav/assets/images/destination2.svg\"\n                  alt=\"destination\"\n                />\n              </div>\n            </div>\n            <div className=\"col-10\">\n              <div className=\"row\">\n                <div className=\"col-12\">{resp}</div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col-12 text-capitalize\"></div>\n              </div>\n            </div>\n          </div>\n          <div></div>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  };\n    /**\n   * @id  N1.1.8\n   * @author Pankaj Singh\n   * @description Set navigation on input field\n   */\n  setNavigation = () => {\n    let {srcData,dstData,selectedVenue} = this.state;\n      if(srcData.buildingName !== dstData.buildingName){\n        this.multiBldNav()\n      }else{\n        this.grids_all=[];\n        // this.createGraph()\n        let building = this.state.dstData.buildingName;\n        let flrData =  this.state.buildingCluster.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].data;\n        let polyData =  this.state.buildingPolyCluster.filter(r=>r.building === this.state.dstData.buildingName)[0].data;\n        let refPoint =  this.state.globalRefPointsList.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].refPoints;\n\n      if(srcData.floor !== dstData.floor){\n        this.multiFloorNav()\n      }else{        \n        let flrMarkData = []\n        flrData.forEach(r=>{\n          if(r.floor === this.state.dstData.floor){\n            flrMarkData.push(r)\n          } \n        })\n        let flrDataPoly = []\n        for(let k=0;k<polyData.length;k++){\n            if(polyData[k].floor === this.state.dstData.floor){\n              flrDataPoly.push(polyData[k])\n            } \n        }\n        this.landMarks = [];\n        this.polygons = []\n        this.handleLocalGlobal(flrMarkData,flrDataPoly,building,refPoint)\n        // this.props.refPoint(\n          // selectedVenue,\n          // this.state.dstData.buildingName,\n          // \"ground\",\n          // () => {\n            // this.props.globalNavigation(\n            //   { venueName: selectedVenue, buildingName: this.state.dstData.buildingName },\n            //   () => {\n            //     this.fltrNvgnData(this.state.dstData.floor)\n            //   }\n            // );\n        //   }\n        // );\n      }\n    }\n  };\n  /**\n   * @id  N1.1.9\n   * @author Pankaj Singh\n   * @description Building to building Navigation\n   */\n  multiBldNav = () => {\n    \n  };\n    /**\n   * @id  N1.1.10\n   * @author Pankaj Singh\n   * @description floor to floor navigation\n   */\n  multiFloorNav = () => {\n    this.props.getAllBuildingElements(\n      {\n        venueName: this.state.selectedVenue,\n        buildingName: this.state.dstData.buildingName\n      },\n      () => {\n    this.createGraph()\n      })\n  };\n    /**\n   * @id  N1.1.11\n   * @author Ushaswini Chintha\n   * @param floor\n   * @description Filter out landmark and nonwalkable from  building data\n   */\n  fltrNvgnData = (floor)=>{\n    let data = this.props.androidNav;\n    const floors = [...new Set(data.map(s => s.floor))];\n    //polygon data or nonwalkables of all floors\n    var poly_data = data\n      .slice(data.length - floors.length, data.length)\n      .filter(r => {\n        return r.floor === floor;\n      });\n    //reduced data without non walkables\n    var red_data = data.slice(0, data.length - floors.length).filter(r => {\n      return r.floor === floor;\n    });\n    this.setState(\n      {\n        floor: floors[0],\n        floors: floors,\n        redData: red_data,\n        polyData: poly_data\n      },\n      () => {\n        this.handleLocalGlobal();\n        // this.mapReferencePoint()\n        // this.singleFloorNav()\n    }\n    );\n  }\n\n\n \n  /**\n   * @id  N1.1.6\n   * @author Pankaj Singh\n   * @description get floor list\n   */\n  getData = (building) => {\n    let data = { venueName: this.state.selectedVenue, buildingName: building };\n    this.props.floorList(data, () => {\n      let flrList = this.props.flrList.data;\n      this.setState({\n        flrList: flrList,\n        selectedBuilding: building\n      });\n    });\n  };\n\n  /**\n   * @id  N1.1.12\n   * @author Pankaj Singh\n   * @description get get complete building data thart\n   */\n  getCompleteData = floor => {\n    let { selectedVenue, selectedBuilding } = this.state;\n    this.props.globalNavigation(\n      { venueName: selectedVenue, buildingName: selectedBuilding },\n      () => {\n        this.fltrNvgnData(floor)\n      }\n    );\n  };\n\n\n\n  /**\n   * @id  N1.1.17\n   * @author Ushaswini Chintha\n   * @description Create Coordinate hasmap\n   */\n  coordHashMap = (crd,coords)=>{\n    coords[0] = {\n      lat: parseFloat(crd[0].globalRef.lat),\n      lon: parseFloat(crd[0].globalRef.lng),\n      localx: parseInt(crd[0].localRef.lat),\n      localy: parseInt(crd[0].localRef.lng)\n    };\n    coords[1] = {\n      lat: parseFloat(crd[3].globalRef.lat),\n      lon: parseFloat(crd[3].globalRef.lng),\n      localx: parseInt(crd[3].localRef.lng),\n      localy: parseInt(crd[3].localRef.lat)\n    };\n    coords[2] = {\n      lat: parseFloat(crd[2].globalRef.lat),\n      lon: parseFloat(crd[2].globalRef.lng),\n      localx: parseInt(crd[2].localRef.lng),\n      localy: parseInt(crd[2].localRef.lat)\n    };\n    coords[3] = {\n      lat: parseFloat(crd[1].globalRef.lat),\n      lon: parseFloat(crd[1].globalRef.lng),\n      localx: parseInt(crd[1].localRef.lng),\n      localy: parseInt(crd[1].localRef.lat)\n    };\n  }\n    /**\n   * @id  N1.1.18\n   * @author Ushaswini Chintha\n   * @description Create Coordinate hasmap\n   */\n  findLeastLat = (coords,leastLat)=>{\n    for (let i = 0; i < coords.length; i++) {\n      if (coords[i].lat == coords[leastLat].lat) {\n        //handling two points with equal lat\n        if (coords[i].lon > coords[leastLat].lon) {\n          leastLat = i;\n        }\n      } else if (coords[i].lat < coords[leastLat].lat) {\n        leastLat = i;\n      }\n    }\n    return leastLat\n  }\n  /**\n   * @id  N1.1.19\n   * @author Ushaswini Chintha\n   * @description Create Coordinate hasmap\n   */\n  betweenLength = (coords,lengths)=>{\n    for (let i = 0; i < coords.length; i++) {\n      var temp1;\n      if (i == coords.length - 1) {\n        temp1 = getHaversineDistance(coords[i], coords[0]);\n      } else {\n        temp1 = getHaversineDistance(coords[i], coords[i + 1]);\n      }\n      lengths.push(temp1);\n    }\n  }\n    /**\n   * @id  N1.1.20\n   * @author Ushaswini Chintha\n   * @description buildingAngle\n   */\n  buildingAngle = (coords,leastLat,highLon)=>{\n    let b = getHaversineDistance(coords[leastLat], coords[highLon]);\n    const horizontal = obtaincoordinates(coords[leastLat], 0, b);\n    let c = getHaversineDistance(coords[leastLat], horizontal);\n    let a = getHaversineDistance(coords[highLon], horizontal);\n    let out =\n      (Math.acos((b * b + c * c - a * a) / (2 * b * c)) * 180) / Math.PI;\n      return out\n  }\n/**\n   * @id  N1.1.22\n   * @author Ushaswini Chintha\n   * @description lift correction\n   */\n  liftCorrection = (red_data,diff)=>{\n    var ground_lift = red_data.filter(x => {\n      return x.element.subType === \"lift\" && x.floor === \"ground\";\n    });\n    if (ground_lift.length != 0) {\n      var nth_lift = 0; //loop to find which lift is across more floors\n      for (let i = 0; i < ground_lift.length; i++) {\n        var temp = red_data.filter(x => {\n          return (\n            x.element.subType === \"lift\" &&\n            x.properties.name === ground_lift[i].properties.name\n          );\n        });\n        if (\n          temp.length >=\n          red_data.filter(x => {\n            return (\n              x.element.subType === \"lift\" &&\n              x.properties.name === ground_lift[nth_lift].properties.name\n            );\n          }).length\n        ) {\n          nth_lift = i;\n        }\n      }\n      var lifts = red_data.filter(x => {\n        return (\n          x.element.subType === \"lift\" &&\n          x.properties.name === ground_lift[nth_lift].properties.name\n        );\n      });\n      for (let i = 0; i < lifts.length; i++) {\n        var temp = {};\n        temp.x = lifts[i].coordinateX - ground_lift[nth_lift].coordinateX;\n        temp.y = lifts[i].coordinateY - ground_lift[nth_lift].coordinateY;\n        temp.floor = lifts[i].floor;\n        diff.push(temp);\n      }\n    }\n  }\n  /**\n   * @id  N1.1.23\n   * @author Ushaswini Chintha\n   * @description lift correction\n   */\n  coordGlblLandmark = (red_data,diff,local_coords,coords,least_lat,high_lon,out)=>{\n    for (let i = 0; i < red_data.length; i++) {\n      if (diff.length > 1) {\n        //vertical correction across floors\n        var test = diff.filter(x => {\n          return x.floor === red_data[i].floor;\n        });\n        local_coords.localx = red_data[i].coordinateX - test[0].x;\n        local_coords.localy = red_data[i].coordinateY - test[0].y;\n      } else {\n        local_coords.localx = red_data[i].coordinateX;\n        local_coords.localy = red_data[i].coordinateY;\n      }\n      var l = distance(coords[least_lat], coords[high_lon]);\n      var m = distance(local_coords, coords[high_lon]);\n      var n = distance(coords[least_lat], local_coords);\n      var theta =\n        (Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180) / Math.PI;\n      if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n        theta = 0;\n      } //staright line case\n      let ang = theta + out;\n      var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n      var ver = dist * Math.sin((ang * Math.PI) / 180.0);\n      var hor = dist * Math.cos((ang * Math.PI) / 180.0);\n      var final = obtaincoordinates(coords[least_lat], ver, hor);\n      red_data[i].properties.latitude = final.lat;\n      red_data[i].properties.longitude = final.lon;\n    }\n  }\n  /**\n   * @id  N1.1.24\n   * @author Ushaswini Chintha\n   * @description conver geojson landmark\n   */\n  geoJsonLandmark = (red_data,geoJSON)=>{\n    for (let i = 0; i < red_data.length; i++) {\n      var p = red_data[i];\n      if (p.name === \"\") {\n        //to deal with empty name field\n        p.name = p.properties.name;\n      }\n      geoJSON.features.push({\n        type: \"Feature\",\n        properties: {\n          name: p.name,\n          floor: p.floor,\n          type: p.element.subType,\n          floorElement: p.element.type,\n          localx: p.coordinateX,\n          localy: p.coordinateY,\n          ...p.properties\n        },\n        geometry: {\n          type: \"Point\",\n          coordinates: [p.properties.longitude, p.properties.latitude]\n        }\n      });\n    }\n  }\n\n  /**\n   * @id  N1.1.25\n   * @author Ushaswini Chintha\n   * @description generate global coordinates for non walkable polygon\n   */\n  coordGlblPolygon = (poly_data,local_coords,diff,coords,least_lat,high_lon,out)=>{\n    for (let k = 0; k < poly_data.length; k++) {\n      var temp2 = [];\n      var floor_length = poly_data[k].properties.floorLength;\n      for (let j = 0; j < poly_data[k].properties.clickedPoints.length; j++) {\n        var line = poly_data[k].properties.clickedPoints[j];\n        var numbers = line.split(\",\").map(Number);\n        var temp1 = [];\n        for (let i = 0; i < numbers.length; i++) {\n          local_coords.localx = numbers[i] % floor_length;\n          local_coords.localy = numbers[i] / floor_length;\n\n          //for vertical allignment across floors\n          if (diff.length > 1) {\n            var test = diff.filter(x => {\n              return x.floor == poly_data[k].floor;\n            });\n            local_coords.localx = local_coords.localx - test[0].x;\n            local_coords.localy = local_coords.localy - test[0].y;\n          }\n          var l = distance(coords[least_lat], coords[high_lon]);\n          var m = distance(local_coords, coords[high_lon]);\n          var n = distance(coords[least_lat], local_coords);\n          var theta =\n            (Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180) / Math.PI;\n          if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n            theta = 0;\n          } //staright line case\n          let ang = theta + out;\n          var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n          var ver = dist * Math.sin((ang * Math.PI) / 180.0);\n          var hor = dist * Math.cos((ang * Math.PI) / 180.0);\n          var final = obtaincoordinates(coords[least_lat], ver, hor);\n          var temp = [];\n          temp.push(final.lon, final.lat);\n          temp1.push(temp);\n        }\n        temp2.push(temp1);\n      }\n      poly_data[k][\"global\"] = temp2;\n    }\n  }\n  /**\n   * @id  N1.1.26\n   * @author Ushaswini Chintha\n   * @description geojson for polygon\n   */\n  geoJSONPoly = (poly_data,geoJSON_poly)=>{\n    for (let j = 0; j < poly_data.length; j++) {\n      for (let i = 0; i < poly_data[j].global.length; i++) {\n        geoJSON_poly.features.push({\n          type: \"Feature\",\n          properties: {\n            floor: poly_data[j].floor\n          },\n          geometry: {\n            type: \"LineString\",\n            coordinates: poly_data[j].global[i]\n          }\n        });\n      }\n    }\n  }\n  /**\n   * @id  N1.1.11\n   * @author Ushaswini Chintha\n   * @description Call Handling\n   */\n  handleCall = (e, position) => {\n    if (String(position.properties.contactNo) === \"null\") {\n      /*to handle null values*/\n      e.preventDefault();\n      alert(` No contact number associated`);\n    } else {\n      window.location.href = \"tel:\" + position.properties.contactNo;\n    }\n  };\n  /**\n   * @id  N1.1.12\n   * @author Ushaswini Chintha\n   * @description Internet Browsing\n   */\n  handleInternet = (e, position) => {\n    if (String(position.properties.url) === \"null\") {\n      /*to handle null values*/\n      e.preventDefault();\n      alert(` No website associated`);\n    } else {\n      window.open(position.properties.url, \"_blank\" /*Open in a new window.*/);\n    }\n  };\n  /**\n   * @id  N1.1.13\n   * @author Ushaswini Chintha\n   * @description Whatsapp Messaging\n   */\n  handleWhatsapp = (e, position) => {\n    if (String(position.properties.contactNo) == \"null\") {\n      /*to handle null values*/\n      e.preventDefault();\n      alert(` No whatsapp number associated`);\n    } else {\n      window.open(\n        \"https://api.whatsapp.com/send?phone=\" + position.properties.contactNo,\n        \"_blank\" /*Open in a new window.*/\n      );\n    }\n  };\n  /**\n   * @id  N1.1.14\n   * @author Ushaswini Chintha\n   * @description Send Mail\n   */\n  handleEmail = (e, position) => {\n    if (String(position.properties.email) == \"null\") {\n      /*to handle null values*/\n      e.preventDefault();\n      alert(` No Email associated`);\n    } else {\n      window.location.href = `mailto: ${position.properties.email}`;\n    }\n  };\n  /**\n   * @id  N1.1.15\n   * @author Ushaswini Chintha\n   * @description Floor Element Info Details\n   */\n  handleInfo = (e, position) => {\n    const info =\n      \"\\n\" +\n      \"Name :  \" +\n      position.properties.name +\n      \"\\n\" +\n      \"Floor num. :  \" +\n      position.properties.floor +\n      \"\\n\" +\n      \"Contact num. :  \" +\n      position.properties.contactNo +\n      \"\\n\" +\n      \"Timings :  \" +\n      position.properties.startTime +\n      \" - \" +\n      position.properties.endTime;\n    e.preventDefault();\n    alert(` ${info}`);\n  };\n\n\n  singleFloorNav = (globalCoords)=>{\n\t\n   this.props.getAllBuildingElements(\n      {\n        venueName: this.state.selectedVenue,\n        buildingName: this.state.dstData.buildingName\n      },\n      () => {\n        \n        // this.setState(\n        //   {\n        //     list: lists\n        //   },\n        //   () => {\n          this.mapBuildingData()\n            let data = { venueName: this.state.selectedVenue, buildingName: this.state.dstData.buildingName };\n            this.props.floorList(data, () => {\n              let flrList = this.props.flrList.data;\n\t\t\n              this.setState({\n                flrList:flrList\n              },()=>{\n\t\t\n                this.handleSubmit(globalCoords);\n\n              })\n            });\n        //   }\n        // );\n      }\n    );\n  }\n\n  createGraph =  ()=>{\n    let building = this.state.dstData.buildingName;\n    let flrList = []\n    let flrData =  this.state.buildingCluster.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].data;\n    let polyData =  this.state.buildingPolyCluster.filter(r=>r.building === this.state.dstData.buildingName)[0].data;\n    let refPoint =  this.state.globalRefPointsList.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].refPoints;\n    polyData.forEach((r)=>{\n      flrList.push(r.floor)\n    })  \n    let srcFlrMarkData = []\n    let dstFlrMarkData = []\n    flrData.forEach(r=>{\n      if(r.floor === this.state.srcData.floor){\n        srcFlrMarkData.push(r)\n      }\n      if(r.floor === this.state.dstData.floor){\n        dstFlrMarkData.push(r)\n      } \n    })\n    let srcFlrDataPoly = []\n    let dstFlrDataPoly = []\n    for(let k=0;k<polyData.length;k++){\n        if(polyData[k].floor === this.state.srcData.floor){\n          srcFlrDataPoly.push(polyData[k])\n        }\n        if(polyData[k].floor === this.state.dstData.floor){\n          dstFlrDataPoly.push(polyData[k])\n        } \n    }\n    this.handleLocalGlobal(srcFlrMarkData,srcFlrDataPoly,building,refPoint,this.state.srcData.floor)\n    this.handleLocalGlobal(dstFlrMarkData,dstFlrDataPoly,building,refPoint,this.state.dstData.floor)\n    this.mapBuildingData()\n        this.setState({\n          floorList:flrList,\n          srcFloorPoly:this.srcFloorPoly,\n          geoJSONPoly:this.srcFloorPoly,\n          dstFloorPoly:this.dstFloorPoly,\n          srcFloorLandMark:this.srcFloorLandmark,\n          geoJSON:this.srcFloorLandmark,\n          dstFloorLandMark:this.dstFloorLandmark,\n          currentFloor:this.state.srcData.floor\n        },()=>{\n          this.findpath(refPoint)\n        });\n  }\n\n\n  mapBuildingData = ()=>{\n    let nodes = this.props.navigationInfo;\n    this.grids_all = [];\n    let lists = [];\n    let num_vert = 0;\n    let fc = new Map();\n    for (let i = 0; i < nodes.length; i++) {\n      if (nodes[i].properties.floorElement === \"FloorConnection\") {\n        num_vert++;\n        var v = nodes[i].properties.type + \",\" + nodes[i].properties.name;\n        var val =\n          nodes[i].properties.floor + \",\" + nodes[i].properties.node;\n        if (fc.has(v) === false) {\n          fc.set(v, [val]);\n        } else {\n          fc.get(v).push(val);\n        }\n      }\n    }\n    this.graph = new Graph(num_vert + 2);\n    for (let i = 0; i < nodes.length; i++) {\n      var sel = nodes[i].properties;\n      lists.push(sel);\n      if (nodes[i].properties.floorElement === \"FloorConnection\") {\n        var val =\n          nodes[i].properties.floor + \",\" + nodes[i].properties.node;\n        this.graph.addVertex(val);\n      }\n      if (nodes[i].properties.floorElement === \"Floor\") {\n        if (nodes[i].properties.length == 8) {\n          var v = nodes[i].properties.frConn[0].split(\",\");\n          var flrmatrix = nodes[i].properties.flr_dist_matrix[0].split(\",\");\n          var len = v.length / 2;\n          if (v.length % 2 === 0) {\n            for (var j = 0; j < v.length; j = j + 2) {\n              var val =\n                parseInt(nodes[i].properties.length) * parseInt(v[j + 1]) +\n                parseInt(v[j]);\n              var vert1 = nodes[i].properties.floor + \",\" + val;\n              for (var k = j + 2; k < v.length; k = k + 2) {\n                val =\n                  parseInt(nodes[i].properties.length) *\n                    parseInt(v[k + 1]) +\n                  parseInt(v[k]);\n                var vert2 = nodes[i].properties.floor + \",\" + val;\n                this.graph.addEdge(\n                  vert1,\n                  vert2,\n                  flrmatrix[len * (j / 2) + k / 2],\n                  true\n                );\n              }\n            }\n          } else {\n          }\n        }\n        this.grids_all.push(nodes[i]);\n      }\n    }\n    let getKeys = fc.keys();\n    for (let i of getKeys) {\n      var get_values = fc.get(i);\n      var cnt = 0;\n      var prev = null;\n      for (var j of get_values) {\n        if (cnt > 0) {\n          this.graph.addEdge(prev, j, 0, true);\n          prev = j;\n        }\n        if (cnt === 0) {\n          prev = j;\n        }\n        cnt++;\n      }\n    }\n  }\n\n  handleSubmit = (globalCoords) => {\n    let { srcData,srcName, dstData,dstName, dstfloorL, dstfloorB } = this.state;\n    let srcVal = \"\";\n    let dstVal = \"\";\n    let srcfloor = \"\";\n    let dstfloor = \"\";\n    for (let k = 0; k < this.props.navigationInfo.length; k++) {\n      if (\n        this.props.navigationInfo[k].properties.floorElement !== undefined &&\n        this.props.navigationInfo[k].properties.floorElement === \"Rooms\"\n      ) {\n        if (srcData.name === this.props.navigationInfo[k].properties.roomName) {\n          srcVal = this.props.navigationInfo[k].properties.node;\n          srcfloor = this.props.navigationInfo[k].properties.floor;\n          dstfloor = this.props.navigationInfo[k].properties.floor;\n        }\n        if (dstData.name === this.props.navigationInfo[k].properties.roomName) {\n          dstVal = this.props.navigationInfo[k].properties.node;\n        }\n      }\n    }\n    let flrList = this.state.buildingPolyCluster.filter((r, i) => {\n      return r.building === this.state.dstData.buildingName;\n    })[0].data;\n        \n    let dstFlrDt = flrList.filter((r, i) => {\n      return r.floor === this.state.dstData.floor;\n    });\n    let srcfloorL = dstFlrDt[0].properties.floorLength;\n    let srcfloorB = dstFlrDt[0].properties.floorBreadth;\n    if (srcVal != null && dstVal != null) {\n      let dest_x = this.state.dstData.coordinateX;\n      let dest_y = this.state.dstData.coordinateY;\n     \n      if (srcfloor === dstfloor) {\n        this.callwhile(\n          srcfloor,\n          srcVal,\n          srcfloorL,\n          srcfloorB,\n          dest_x,\n          dest_y,\n          true,\n          \"myCanvassrc\",\n          globalCoords\n        );\n        this.setState({\n          samefloor: true\n        });\n      } else {\n        // this.setState({\n        //   samefloor: false,\n        //   buildingView: true\n        // });\n        // this.findpath();\n      }\n    } else {\n    }\n  };\n  /**\n   * @id  N1.1.17\n   * @author Pankaj Singh\n   * @description Find index of floor from floor list array\n   */\n  findFloor = (key, array) => {\n    if (array !== undefined) {\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].type) {\n          if (array[i].geomtery.type === \"Polygon\") {\n            if (array[i].properties.floor === key) {\n              return i;\n            }\n          }\n        }\n        if (array[i].floor === key) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  };\n  reset_var() {\n    this.grids = [];\n    this.visited = [];\n    this.shortestpath = [];\n    this.minimumcost = [];\n    this.leaves = [];\n  }\n  /**\n   *@id test 3  \n   *@author Jahnavi Methukumalli\n   *@description Find the safest path between source and destination\n   */\n\n   findAccessPath = (paths, srcfloor) => {\n\t\n\tvar weights = [1,1,1,1,1,1];\n\tvar score = [];\n\tvar protrusion=[];\n\tvar epi = 0;\n\tfor(let i=0; i<paths.length; i++){\n\t\tvar points = paths[i];\n\t\tvar pro = [0,0,0,0,0,0];\n\t\t//stairs\n\t\tfor(let j=0;j<parseInt(this.flrconn.length);j++){\n\t\t\tvar cord = [parseInt(this.flrconn[j][0]),parseInt(this.flrconn[j][1])];\n\t\t\tif(points.includes(cord)){\n\t\t\t\tpro[0] = pro[0]+1;\t\n\t\t\t}\t\t\t\n\t\t\n\t\t}\n\t\t//turn\n\t\tfor(let j=1;j<points.length-1;j++){\n\t\t\tvar a = points[j-1][0] - points[j][0];\n\t\t\tvar b = points[j][1] - points[j+1][1];\n\t\t\tvar c = points[j-1][1] - points[j][1];\n\t\t\tvar d = points[j][0] - points[j+1][0];\n\n\t\t\tif(a*b != c*d){\n\t\t\t\tpro[1] = pro[1]+1;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//protrusion\n\t\tfor (let j=0;j<protrusion.length;j++){\n\t\t\tfor (let k=0;j<points.length;k++){\n\t\t\t\tvar dist = Math.sqrt((points[k][0]-protrusion[j][0])*(points[k][0]-protrusion[j][0]) +\n\t\t\t\t\t(points[k][1]-protrusion[j][1])*(points[k][1]-protrusion[j][1]));\n\t\t\t\tif(dist<epi){\n\t\t\t\t\tpro[2] = pro[2]+1;\n\t\t\t\t}\t\t\t\t\n\n\t\t\t}\n\n\t\t}\t\t\n\t\t\t\n\t\tvar pathscr = 0;\n\t\tfor(let j=0;j<6;j++){\n\t\t\tpathscr = pathscr + (weights[j]*pro[j]);\n\t\t}\n\t\tscore.push(pathscr);\n\t}\n\tvar min = Number.MAX_VALUE();\n\tvar index = -1;\n\tfor(let i=0;i<score.length;i++){\n\t\tif(score[i]<min){\n\t\t\tmin = score[i];\n\t\t\tindex = i;\n\t\t}\n\t\n\t}\n\t \n\treturn paths[index];\n   }\n\t\n   \n    \n  /**\n   *@id test 2  \n   *@author Jahnavi Methukumalli\n   *@description Find the safest path between source and destination\n   */\n\n   findSafePath = (paths, srcfloor) => {\n\t\n\tvar weights = [1,1,1,1,1,1];\n\tvar score = [];\n\tfor(let i=0; i<paths.length; i++){\n\t\tvar points = paths[i];\n\t\tvar props = [0,0,0,0,0,0];\n\t\tvar protrusion = [];\n\t\tvar epi=0;\n\t\t//stairs\n\t\tfor(let j=0;j<parseInt(this.flrconn.length);j++){\n\t\t\tvar cord = [parseInt(this.flrconn[j][0]),parseInt(this.flrconn[j][1])];\n\t\t\tif(points.includes(cord)){\n\t\t\t\tprops[0] = props[0]+1;\t\n\t\t\t}\t\t\t\n\t\t\n\t\t}\n\t\t//turn\n\t\tfor(let j=1;j<points.length-1;j++){\n\t\t\tvar a = points[j-1][0] - points[j][0];\n\t\t\tvar b = points[j][1] - points[j+1][1];\n\t\t\tvar c = points[j-1][1] - points[j][1];\n\t\t\tvar d = points[j][0] - points[j+1][0];\n\n\t\t\tif(a*b != c*d){\n\t\t\t\tprops[1] = props[1]+1;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//protrusion\n\t\tfor (let j=0;j<protrusion.length;j++){\n\t\t\tfor (let k=0;j<points.length;k++){\n\t\t\t\tvar dist = Math.sqrt((points[k][0]-protrusion[j][0])*(points[k][0]-protrusion[j][0]) +\n\t\t\t\t\t(points[k][1]-protrusion[j][1])*(points[k][1]-protrusion[j][1]));\n\t\t\t\tif(dist<epi){\n\t\t\t\t\tprops[2] = props[2]+1;\n\t\t\t\t}\t\t\t\t\n\n\t\t\t}\n\n\t\t}\t\t\t\n\t\t\t\n\t\tvar pathscr = 0;\n\t\tfor(let j=0;j<6;j++){\n\t\t\tpathscr = pathscr + (weights[j]*props[j]);\n\t\t}\n\t\tscore[i] = pathscr;\n\t}\n\tvar min = Number.MAX_VALUE();\n\tvar index = -1;\n\tfor(let i=0;i<score.length;i++){\n\t\tif(score[i]<min){\n\t\t\tmin = score[i];\n\t\t\tindex = i;\n\t\t}\n\t\n\t}\n\t \n\treturn paths[index];\n\t\n   }\n\n   /** \n    *  @id test2\n    * @author Jahnavi Methukumalli\n    * @description Find simplest path between source and dest\n    * \n   */\n    callsimplest(shortestpath, srcVal, dest_x , dest_y,  ){\n      \n\n\n    }\n  /**\n   * @id test 1\n   * @author Jahnavi Methukumalli\n   * @description Find simplest path between source and destination(A*)  \n   */\n\n  callwhile_h = (srcfloor, srcVal, m, n, dest_x, dest_y, single, canvasid, globalCoords = null) => {\n\n   var closed = [];\n   \n   for (let i=0 ; i<m ; i++){\n      var row = [],\n         row1 = [],\n         row2 = [],\n         row3 = [],\n         row4 = [];\n      for (let j=0 ; j<n ; j++){\n        row.push(1);\n        row1.push(-1);\n        row3.push(Number.MAX_VALUE);\n        var row5 = [];\n        row4.push(row5);\n      }\n      this.shortestpath(row4);\n      this.grids.push(row);\n      this.visited.push(row1);\n      this.minimumcost.push(row3);\n   }\n\n   var ind1 = this.findFloor(srcfloor, this.grids_all);\n   if(ind1 !== -1 && this.grids_all[ind1].properties.grid_1 != null){\n      for(let i=0 ; i < this.grids_all[ind1].properties.grid_1.length; i++){\n        var nodes = this.grid_all[ind1].properties.grid_1[i].split(\",\");\n        for(let j=0 ; j<nodes.length ; j++){\n          var val = nodes[j];\n          var x = val % m;\n          var y = parseInt(val/m);\n\n          this.grids[x][y] = 0;\n        }\n      }\n   }\n\n   var src_x = srcVal % m ;\n   var src_y = parseInt(srcVal/m);\n   this.leaves.push([src_x,src_y]);\n   this.shortestpath[src_x][src_y].push([src_x,src_y]);\n   this.minimumcost[src_x][src_y] = 0;\n   while (this.leaves.length > 0){\n      var min = Number.MAX_VALUE;\n      var q;\n      var ind;\n      for (let i = 0; i<this.leaves.length;i++){\n        if(min > this.minimumcost[this.leaves[i][0]][this.leaves[i][1]]){\n          min = this.minimumcost[this.leaves[i][0]][this.leaves[i][1]];\n          q = this.leaves[i];\n\n        }\n      }\n      this.visited[q[0]][q[1]] = 1;\n      if(single == true){\n          if(q[0] == dest_x && q[1] == dest_y){\n              break;\n          }\n      }else {\n          var check = true;\n          for (let i=0 ; i< parseInt(this.flrconn.lenght); i++){\n            if(this.visited[parseInt(this.flrconn[i][0])][parseInt(this.flrconn[i][1])] == -1){\n              check = false;\n            }\n          }\n          if(check == true){\n            for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n              var vert = srcfloor + \",\" + srcVal + \",\" + \"virtual\";\n              console.log(\"verjsdh1\",vert)\n              this.graph.addEdge(\n                vert,\n                this.flrconn[ch][2],\n                this.minimumcost[parseInt(this.flrconn[ch][0])][\n                  parseInt(this.flrconn[ch][1])\n                ],\n                true\n              );\n            }\n             this.reset_var();\n             break;           \n          }\n      }\n      this.leaves.splice(ind,1);\n      for (let i = q[0]-1; i<=q[0]+1 ;i++){\n        for(let j = q[1]-1; j<=q[1]+1 ; j++){\n          if(i>=0 && i<m || j>=0 && j<n){\n            if(this.visited[i][j]==-1 && this.grids[i][j] == 1){\n              //A* main part to release closed list and open lists   \n              \n            }\n          }\n        }\n      }\n\n   }\n\n  }\n\n  /**\n   * @id  N1.1.18\n   * @author Anirudh Khammampati & Sai Kumar Reddy\n   * @description Find shortest path between source and destination\n   */\n  callwhile = (srcfloor, srcVal, m, n, dest_x, dest_y, single, canvasid,globalCoords = null) => {\n    var min = Number.MAX_VALUE;\n    var minleave = [];\n    var var_i;\n    var notthere;\n    for (let i = 0; i < m; i++) {\n      var row = [],\n        row1 = [],\n        row3 = [],\n        row4 = [];\n      for (let j = 0; j < n; j++) {\n        row.push(1);\n        row1.push(-1);\n        row3.push(Number.MAX_VALUE);\n        var row5 = [];\n        row4.push(row5);\n      }\n      this.shortestpath.push(row4);\n\t\t\n      this.grids.push(row);\n      this.visited.push(row1);\n      this.minimumcost.push(row3);\n    }\n    var ind1 = this.findFloor(srcfloor, this.grids_all);\n    if (ind1 !== -1 && this.grids_all[ind1].properties.grid_1 != null) {\n      for (let i = 0; i < this.grids_all[ind1].properties.grid_1.length; i++) {\n        var nodes = this.grids_all[ind1].properties.grid_1[i].split(\",\");\n        for (let j = 0; j < nodes.length; j++) {\n          var val = nodes[j];\n          var x = val % m;\n          var y = parseInt(val / m);\n\n          this.grids[x][y] = 0;\n        }\n      }\n    }\n    var src_x = srcVal % m;\n    var src_y = parseInt(srcVal / m);\n    this.leaves.push([src_x, src_y]);\n    this.shortestpath[src_x][src_y].push([src_x, src_y]);\n    this.minimumcost[src_x][src_y] = 0;\n    while (this.leaves.length > 0) {\n      min = Number.MAX_VALUE;\n      for (let i = 0; i < this.leaves.length; i++) {\n        if (min > this.minimumcost[this.leaves[i][0]][this.leaves[i][1]]) {\n          min = this.minimumcost[this.leaves[i][0]][this.leaves[i][1]];\n          minleave = this.leaves[i];\n          var_i = i;\n        }\n      }\n      this.visited[minleave[0]][minleave[1]] = 1;\n      if (single == true) {\n        if (minleave[0] == dest_x && minleave[1] == dest_y) {\n          break;\n        }\n      } else {\n        var check = true;\n        //console.log(this.flrconn);\n        for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n          if (\n            this.visited[parseInt(this.flrconn[ch][0])][\n              parseInt(this.flrconn[ch][1])\n            ] == 1\n          ) {\n          } else {\n            check = false;\n          }\n        }\n        if (check == true) {\n          for (var ch = 0; ch < parseInt(this.flrconn.length); ch++) {\n            var vert = srcfloor + \",\" + srcVal + \",\" + \"virtual\";\n            console.log(\"verjsdh1\",vert)\n            console.log(this.flrconn[ch][2],this.minimumcost[parseInt(this.flrconn[ch][0])][\n              parseInt(this.flrconn[ch][1])]);\n            this.graph.addEdge(\n              vert,\n              this.flrconn[ch][2],\n              this.minimumcost[parseInt(this.flrconn[ch][0])][\n                parseInt(this.flrconn[ch][1])\n              ],\n              true\n            );\n          }\n          this.reset_var();\n          break;\n        }\n      }\n      this.leaves.splice(var_i, 1);\n      for (var j = minleave[0] - 1; j <= minleave[0] + 1; j++) {\n        for (var k = minleave[1] - 1; k <= minleave[1] + 1; k++) {\n          if (j >= 0 && j < m && k >= 0 && k < n) {\n            if (this.visited[j][k] == -1 && this.grids[j][k] == 1 &&(j==minleave[0]||k==minleave[1])) {\n              if (\n                this.minimumcost[j][k] >\n                this.minimumcost[minleave[0]][minleave[1]] +\n                  Math.abs(minleave[0]-j)+Math.abs(minleave[1]-k)\n\t\t//Math.abs(j-dest_x)+Math.abs(k-dest_y)\n              ) {\n                this.minimumcost[j][k] =\n                  this.minimumcost[minleave[0]][minleave[1]] +\n                 Math.abs(minleave[0]-j)+Math.abs(minleave[1]-k);\n                 //+Math.abs(j-dest_x)+Math.abs(k-dest_y);\n                this.shortestpath[j][k] = this.shortestpath[minleave[0]][\n                  minleave[1]\n                ].concat([[j, k]]);\n                notthere = 1;\n                for (var p = 0; p < this.leaves.length; p++) {\n                  if (this.leaves[p][0] == j && this.leaves[p][1] == k) {\n                    notthere = 0;\n                  }\n                }\n                if (notthere == 1) {\n                  this.leaves.push([j, k]);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    if (single == true) {\n    let sp = this.shortestpath[dest_x][dest_y];\n      let mypoints = sp.map(r => {\n        return { x: r[0], y: r[1] };\n      });\n      sp = JSON.stringify(sp);\n      var refinedpaths = simplifyPath(mypoints, 2);\n      let { selectedVenue, selectedBuilding } = this.state;\n      // this.props.globalNavigation(\n        // { venueName: selectedVenue, buildingName: this.state.dstData.buildingName },\n        // () => {\n          this.callGlobal(sp,srcfloor,globalCoords);\n          // this.fltrNvgnData(floor)\n        // }\n      // );\n      let flrData =  this.state.buildingCluster.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].data;\n        let allElements = flrData;\n      if(this.state.srcData.floor === this.state.dstData.floor){\n        let instructions = findInstructions(\n            sp,\n            refinedpaths,\n            allElements,\n            srcfloor\n        );\n        this.setState({\n          instructions:instructions\n        })\n      }else{\n        let instructions = findInstructions(\n          sp,\n          refinedpaths,\n          allElements,\n          srcfloor\n      );\n      \n      if(srcfloor === this.state.srcData.floor){\n        this.srcFlrInstructions = instructions;\n        this.setState({\n          instructions:instructions\n        })\n      }else{\n        this.dstFlrInstructions = instructions\n      }\n      }\n      // this.setState({\n      //   instructions: instructions\n      // });\n    }\n    this.reset_var()\n  };\n  /**\n   * @id  N1.1.19\n   * @author Pankaj Singh\n   * @description Load coordinates on osm\n   */\n  callGlobal = (shortestpath,srcfloor = null,globalCoords = null) => {\n    let crd = this.props.globalCoords.coordinates;\n    if(globalCoords){\n      crd = globalCoords\n    }\n\n    var coords = []; // \"breadth\":\"154\",\"length\":\"173\" , conversion: *3.28084\n    let sp = JSON.parse(shortestpath);\n    this.defineCoords(crd, coords);\n    //finding the point with lowest latitude and highest longitude\n    var least_lat = 0;\n    var high_lon = 0;\n    //finding the point with lowest latitude and highest longitude\n    for (let i = 0; i < coords.length; i++) {\n      \n      if (coords[i].lat == coords[least_lat].lat) {\n        //handling two points with equal lat\n        if (coords[i].lon > coords[least_lat].lon) {\n          least_lat = i;\n        }\n      } else if (coords[i].lat < coords[least_lat].lat) {\n        least_lat = i;\n      }\n    }\n    //evaluating high_lon\n    var c1 = least_lat == 3 ? 0 : least_lat + 1;\n    var c2 = least_lat == 0 ? 3 : least_lat - 1;\n    var high_lon = coords[c1].lon > coords[c2].lon ? c1 : c2;\n    console.log(c1);\n    console.log(c2);\n    console.log(coords[c1].lat);\n    console.log(coords[c2].lon);\n    ///lengths between given 4 global co-ordinates\n    var lengths = [];\n    for (let i = 0; i < coords.length; i++) {\n      var temp1;\n      if (i == coords.length - 1) {\n        temp1 = getHaversineDistance(coords[i], coords[0]);\n      } else {\n        temp1 = getHaversineDistance(coords[i], coords[i + 1]);\n      }\n      lengths.push(temp1);\n    }\n    // building angle with equator or true horizontal\n    var b = getHaversineDistance(coords[least_lat], coords[high_lon]);\n    const horizontal = obtaincoordinates(coords[least_lat], 0, b);\n    var c = getHaversineDistance(coords[least_lat], horizontal);\n    var a = getHaversineDistance(coords[high_lon], horizontal);\n    var out =\n      (Math.acos((b * b + c * c - a * a) / (2 * b * c)) * 180) / Math.PI;\n    // Vertical alignment or lift correction\n    var diff = []; //array to store offset of each floor\n    // loop to calculate all the coordinates of local points\n    var local_coords = { localx: 0, localy: 0 };\n    var myarr = JSON.parse(shortestpath);\n    //finding min and max latitude and longitude for the path\n    var max_lat = Number.MIN_SAFE_INTEGER;\n    var max_long = Number.MIN_SAFE_INTEGER;\n    var min_lat = Number.MAX_VALUE;\n    var min_long = Number.MAX_VALUE;\n    \n    for (let i = 0; i < sp.length; i++) {\n      if (diff.length > 1) {\n        //vertical correction across floors\n        local_coords.localx = sp[i][0];\n        local_coords.localy = sp[i][1];\n      } else {\n        local_coords.localx = sp[i][0];\n        local_coords.localy = sp[i][1];\n      }\n      var l = distance(coords[least_lat], coords[high_lon]);\n      var m = distance(local_coords, coords[high_lon]);\n      var n = distance(coords[least_lat], local_coords);\n      var theta =\n        (Math.acos((l * l + n * n - m * m) / (2 * l * n)) * 180) / Math.PI;\n      if ((l * l + n * n - m * m) / (2 * l * n) > 1 || m == 0 || n == 0) {\n        theta = 0;\n      } //staright line case\n      let ang = theta + out;\n      var dist = distance(coords[least_lat], local_coords) * 0.3048; //to convert to meter\n      var ver = dist * Math.sin((ang * Math.PI) / 180.0);\n      var hor = dist * Math.cos((ang * Math.PI) / 180.0);\n      var final = obtaincoordinates(coords[least_lat], ver, hor);\n    \n      myarr[i][0] = final.lat;\n      myarr[i][1] = final.lon;\n      if(max_lat<myarr[i][0]) max_lat = myarr[i][0];\n      if(max_long<myarr[i][1])max_long = myarr[i][1];\n      if(min_lat>myarr[i][0])min_lat = myarr[i][0];\n      if(min_long>myarr[i][1])min_long = myarr[i][1];\n     }\n\t  var mid_lat = (min_lat + max_lat)/2;\n\t  var mid_long = (min_long+max_long)/2;\n\n\t  var corner1 = L.latLng(min_lat+0.0001,min_long+0.0001);\n    var corner2 = L.latLng(max_lat+0.0001,max_long+0.0001);\n    var myBounds = L.latLngBounds(corner1,corner2);\n\t  var map = this.leafletMap.leafletElement;\n    \n     //console.log(myBounds.getNorthEast());\n    //console.log(min_lat);\n    //console.log(max_lat);\n    map.flyTo(new L.latLng(mid_lat,mid_long),21.6);\n    console.log(map.getZoom());\n\t  //map.flyToBounds(myBounds);\n    console.log(map.getZoom());\n    //map.flyTo(new L.LatLng(mid_lat+0.00002,mid_long+0.00001),22.5, {animation : true, duration :1});\n\t  //console.log(min_long);\n\t  //console.log(min_lat);\n    console.log(map.getZoom());\n\n        \n    //converting to geoJSON format\n    let geoJSON = {\n      type: \"FeatureCollection\",\n      features: []\n    };\n    // myarr.shift();\n    // myarr.pop();\n    // myarr.pop();\n\n    for (let i = 0; i < myarr.length; i++) {\n      var p = myarr[i];\n      geoJSON.features.push({\n        type: \"Feature\",\n        geometry: {\n          type: \"Polygon\",\n          coordinates: [p[0], p[1]]\n        }\n      });\n    }\n\n    if(this.state.srcData.floor !== this.state.dstData.floor){\n      if(srcfloor === this.state.srcData.floor){\n        this.srcFloorSp = geoJSON\n      }else{\n        this.dstFloorSp = geoJSON\n      }\n    }else{\n      this.setState(\n        {\n          showpath: true,\n          // showMarker: false,\n          zoom: 19,\n          pathgeoJSON: geoJSON\n        },\n        () => {\n          // var southWest = L.latLng(src[1], src[0]),\n            // northEast = L.latLng(dst[1], dst[0]),\n            // bounds = L.latLngBounds(southWest, northEast);\n          // map.fitBounds(bounds);\n        }\n      );\n    }\n    \n\n    \n  };\n\n  defineCoords = (crd, coords) => {\n    coords[0] = {\n      lat: parseFloat(crd[0].globalRef.lat),\n      lon: parseFloat(crd[0].globalRef.lng),\n      localx: parseInt(crd[0].localRef.lat),\n      localy: parseInt(crd[0].localRef.lng)\n    };\n    coords[1] = {\n      lat: parseFloat(crd[3].globalRef.lat),\n      lon: parseFloat(crd[3].globalRef.lng),\n      localx: parseInt(crd[3].localRef.lng),\n      localy: parseInt(crd[3].localRef.lat)\n    };\n    coords[2] = {\n      lat: parseFloat(crd[2].globalRef.lat),\n      lon: parseFloat(crd[2].globalRef.lng),\n      localx: parseInt(crd[2].localRef.lng),\n      localy: parseInt(crd[2].localRef.lat)\n    };\n    coords[3] = {\n      lat: parseFloat(crd[1].globalRef.lat),\n      lon: parseFloat(crd[1].globalRef.lng),\n      localx: parseInt(crd[1].localRef.lng),\n      localy: parseInt(crd[1].localRef.lat)\n    };\n  };\n\n  handleVenueChange = e => {\n    this.setState(\n      {\n        buildingList: [],\n        flrList: [],\n        selectedBuilding: \"\",\n        floorSelect: false,\n        selectNavigation: false,\n        geoJSON: [],\n        geoJSONPoly: []\n      },\n      () => {\n        this.selectedVenue(e[0].venueName, e[0].coordinates);\n      }\n    );\n  };\n /**\n   * @id  N1.1.19\n   * @author Pankaj Singh\n   * @description Load coordinates on osm\n   */\n  findpath = ()=> {\n    let srcVal = \"\";\n    let dstVal = \"\";\n    let srcfloor = \"\";\n    let dstfloor = \"\";\n    let srcFloorL = \"\";\n    let srcFloorB = \"\";\n    let dstFloorL = \"\";\n    let dstFloorB = \"\";\n    let building = this.state.dstData.buildingName;\n    let flrData =  this.state.buildingCluster.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].data;\n    let polyData =  this.state.buildingPolyCluster.filter(r=>r.building === this.state.dstData.buildingName)[0].data;\n    let refPoint =  this.state.globalRefPointsList.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].refPoints;        \n    // let i = parseInt(gridY) * floorL + parseInt(gridX);\n    // let flrMarkData = []\n    //        flrData.forEach(r=>{\n    //         if(r.floor === this.state.dstData.floor){\n    //           flrMarkData.push(r)\n    //         } \n    //       })\n          let flrDataPoly = []\n          for(let k=0;k<polyData.length;k++){\n              if(polyData[k].floor === this.state.dstData.floor){\n                dstFloorL = polyData[k].properties.floorLength\n                dstFloorB = polyData[k].properties.floorBreadth\n              } \n              if(polyData[k].floor === this.state.srcData.floor){\n                srcFloorL = polyData[k].properties.floorLength\n                srcFloorB = polyData[k].properties.floorBreadth\n              }\n          }\n          let {srcData,dstData} = this.state\n          let srcNode = parseInt(srcData.coordinateY) * srcFloorL + parseInt(srcData.coordinateX);\n          let dstNode = parseInt(dstData.coordinateY) * dstFloorL + parseInt(dstData.coordinateX);          \n          for(let k=0;k<flrData.length;k++){\n            if(flrData[k].floor === this.state.dstData.floor){\n              dstVal = flrData[k].properties.node \n            } \n            if(flrData[k].floor === this.state.srcData.floor){\n              srcVal = flrData[k].properties.node \n            }\n        }\n    // let i = parseInt(gridY) * floorL + parseInt(gridX);\n    var srcvert = this.state.srcData.floor + \",\" + srcNode + \",\" + \"virtual\";\n    var dstvert = this.state.dstData.floor + \",\" + dstNode + \",\" + \"virtual\";\n    if (this.graph.hasvertex(srcvert)) {\n    } else {\n      this.graph.addVertex(srcvert);\n      this.flrconn = [];\n      this.flrind = [];\n      console.log(this.state.srcData.floor);\n      for(let k=0;k<flrData.length;k++){\n        if (\n          flrData[k].floor === this.state.srcData.floor &&\n          flrData[k].element.type === \"FloorConnection\"\n        ) {\n          // var vert = flrData[k].properties.node\n          var vert = flrData[k].floor + \",\" + flrData[k].properties.node ;\n          this.flrconn.push([flrData[k].coordinateX , flrData[k].coordinateY, vert]);\n          this.flrind.push([k,vert]);\n          console.log(this.flrconn);\n\n        }\n    }\n      this.callwhile(\n        this.state.srcData.floor,\n        srcNode,\n        srcFloorL,\n        srcFloorB,\n        null,\n        null,\n        false,\n        null\n      );\n    }\n    if (this.graph.hasvertex(dstvert)) {\n    } else {\n      this.graph.addVertex(dstvert);\n      this.flrconn = [];\n    \n      for(let k=0;k<flrData.length;k++){\n        if(flrData[k].floor === this.state.dstData.floor &&\n          flrData[k].element.type === \"FloorConnection\"){\n            var vert = flrData[k].floor + \",\" + flrData[k].properties.node ;\n            this.flrind.push([k,vert]);\n          this.flrconn.push([flrData[k].coordinateX , flrData[k].coordinateY, vert]);\n        }\n    }\n    console.log(this.flrconn);\n    console.log(this.flrind);\n      this.callwhile(\n        this.state.dstData.floor,\n        dstNode,\n        dstFloorL,\n        dstFloorB,\n        null,\n        null,\n        false,\n        null\n      );\n    }\n    this.specialcallwhile(\n      this.state.srcData.floor,\n      srcvert,\n      this.state.dstData.floor,\n      dstvert,refPoint\n    );\n  }\n\n  specialcallwhile(srcfloor,srcvert,dstfloor,dstvert,refPoint){\n    console.log(\"srcfloor,srcvert,dstfloor,dstvert\",srcfloor,srcvert,dstfloor,dstvert,refPoint)\n    var min = Number.MAX_VALUE;\n    var minleave=null;\n    var var_i;\n    var notthere;\n    let shortestpath = new Map();\n    let visited = new Map();\n    let minimumcost = new Map();\n    let leaves =[];\n    let flrData =  this.state.buildingCluster.filter(r=>r.buildingName === this.state.dstData.buildingName)[0].data;\n    var get_keys = this.graph.AdjList.keys();\n    for(var i of get_keys){\n      minimumcost.set(i,min);\n      visited.set(i,false);\n    }\n    leaves.push(srcvert);\n    shortestpath.set(srcvert,[srcvert]);\n    minimumcost.set(srcvert,0);\n    // this.graph.printGraph()\n    while(leaves.length > 0){\n      // alert(\"stop \"+leaves.length);\n      min = Number.MAX_VALUE;\n      for(let i=0;i<leaves.length;i++){\n        if(min > minimumcost.get(leaves[i])){\n          min = minimumcost.get(leaves[i]);\n          minleave = leaves[i];\n          var_i = i;\n        }\n      }\n      visited.set(minleave,true);\n        if(minleave == dstvert){\n          // alert(\" i \"+JSON.stringify(shortestpath.get(dstvert)));\n          break;\n        }\n      leaves.splice(var_i, 1);\n          var get_values = this.graph.AdjList.get(minleave);\n          var get_dist = this.graph.Adjweights.get(minleave);\n          var flag =0;\n          for (var jj=0;jj<get_values.length;jj++) {\n            var j = get_values[jj];\n            console.log(j);\n\n            var l = j.split(\",\");\n            var neighbour = false;\n            if(l.length==2){\n              neighbour=true;\n            }\n            else if(l.length==3){\n              if(j==dstvert){\n                neighbour=true;\n              }\n            }\n            var dataind = 0;\n            for(var kk=0; kk<this.flrind.length;kk++){\n                if(String(this.flrind[kk][1]).localeCompare(String(j))==0){\n                  dataind = kk;\n                }\n            }\n            console.log(dataind);\n            console.log(this.flrind[dataind]);\n            console.log(flrData[this.flrind[dataind][0]].element.subType);\n            if(visited.get(j) == false && neighbour && flrData[this.flrind[dataind][0]].element.subType===\"lift\"){\n              console.log(j);\n              //console.log(minleave);\n              if(minimumcost.get(j) > minimumcost.get(minleave) + get_dist[jj] ){\n               // console.log(j);\n                minimumcost.set(j,minimumcost.get(minleave) + get_dist[jj]);\n                var dum = [];\n                dum = shortestpath.get(minleave);\n                dum = dum.concat([j]);\n                shortestpath.set(j ,dum);\n                \n                notthere = 1;\n                for(var p=0;p<leaves.length;p++){\n                  if(leaves[p] == j){\n                    notthere = 0;\n                  }\n                }\n                if(notthere == 1){\n                  \n                  leaves.push(j);\n                  \n                }\n              }\n              \n            }\n            \n          }\n    }\n    this.createcanvas(shortestpath.get(dstvert),false,refPoint);\n  }\n\n  createcanvas( list, samefloor,refPoint) {\n    if (samefloor === false) {  \n      let ans = new Map();\n      for (var i = 0; i < list.length; i++) {\n        var e = list[i].split(\",\");\n        if (ans.has(e[0])) {\n          ans.get(e[0]).push(e[1]);\n        } else {\n          ans.set(e[0], [e[1]]);\n        }\n      }\n\n      var get_keys = ans.keys();\n      let clist = [];\n      let floorLlist = [];\n      var cnt = 0;\n      for (var i of get_keys) {\n        var ind1 = this.findFloor(i, this.props.flrList);\n        var ind = this.findFloor(i, this.grids_all);\n        floorLlist.push(this.grids_all[ind].properties.length);\n        clist.push({\n          id: cnt,\n          scale: 10,\n          floorL: this.grids_all[ind].properties.length,\n          floorB: this.grids_all[ind].properties.breadth,\n          fileName: this.grids_all[ind].properties.fileName,\n          floor: this.grids_all[ind].properties.floor\n        });\n        cnt++;\n      }\n      this.callimage(0, ans, cnt, clist, floorLlist,refPoint);\n    }\n  }\n\n  callimage(cnt, ans, count, clist, floorLlist,refPoint) {\n    let floorList = [this.state.srcData.floor, this.state.dstData.floor];\n    for (let jj = 0; jj < floorList.length; jj++) {\n      for (let ii = 0; ii < clist.length; ii++) {\n        if (floorList[jj] === clist[ii].floor) {\n          let i = clist[ii].floor;\n          let me = this;\n          let get_val = ans.get(i);\n              var id = \"canvas\" + ii;\n              // me.loadMultiFloorNonwalkable(id)\n              var index = me.findFloor(i, me.grids_all);\n              var m = parseInt(me.grids_all[index].properties.length);\n              var n = parseInt(me.grids_all[index].properties.breadth);\n              for (var j = 0; j < get_val.length - 1; j++) {\n                var dest_x = get_val[j + 1] % m;\n                var dest_y = parseInt(get_val[j + 1] / m);\n                console.log(\"i, get_val[j], m, n, dest_x, dest_y, true, id\",i, get_val[j], m, n, dest_x, dest_y, true, id)\n                me.callwhile(i, get_val[j], m, n, dest_x, dest_y, true, id,refPoint);\n              }\n              var node_count = 0;\n              for (var j of get_val) {\n                if (ii === count - 1) {\n                  if (node_count === get_val.length - 1) {\n                     //me.color_canvas_spl(j, id, \"green\", floorLlist[ii]);\n                  } else {\n                     //me.color_canvas_spl(j, id, \"yellow\", floorLlist[ii]);\n                  }\n                } else {\n                  if (node_count === 0 && ii === 0) {\n                     //me.color_canvas_spl(j, id, \"red\", floorLlist[ii]);\n                  } else {\n                     //me.color_canvas_spl(j, id, \"yellow\", floorLlist[ii]);\n                  }\n                }\n                node_count++;\n              }\n\n        }\n      }\n    }\n    console.log(\"this.srcFloorSp,this.dstFloorSp\")\n    this.setState({\n      srcFloorSp:this.srcFloorSp,\n      dstFloorSp:this.dstFloorSp,\n      pathgeoJSON:this.srcFloorSp,\n      srcFlrInstructions:this.srcFlrInstructions,\n      dstFlrInstructions:this.dstFlrInstructions,\n      showpath:true\n    })\n  }\n\n  callmark(ans, floorLlist) {\n    var get_keys = ans.keys();\n    var cnt = 0;\n    for (var i of get_keys) {\n      var canvasid = \"canvas\" + cnt;\n      var get_val = ans.get(i);\n      for (var j of get_val) {\n        this.color_canvas_spl(j, canvasid, \"blue\", floorLlist[cnt]);\n      }\n      cnt++;\n    }\n  }\n  render() {\n    let srtdFlr = [];\n    var mod = new PathModal();\n\n    special.forEach((r1, i) => {\n                this.state.floorList &&\n              this.state.floorList.forEach(r2=>{\n                  if( r1 === r2){\n                      srtdFlr.push(r1)\n                  } \n                })\n              })\n    return (\n      <React.Fragment>\n        {/*Instruction Component */}\n        <div hidden={!this.state.showInstructions}>\n          <Instructions\n            dstAddress={this.state.dstAddress}\n            globalTime={this.state.globalTime}\n            globalDistance={this.state.globalDistance}\n            currentLocation={this.state.currentLocation}\n            handleBuildingView={this.handleBuildingView}\n            instructionSet={this.state.instructions}\n            buildingView={this.state.buildingView}\n            sourceLocation={this.state.currentLocation}\n            dstLocation={this.state.dstAddress}\n            dstName={this.state.dstName}\n            srcName={this.state.srcName}\n            handleInstr={() => {\n              this.setState({\n                showInstructions: false\n              });\n            }}\n          />\n        </div>\n        <div className=\"landing-height\" hidden={this.state.showInstructions}>\n          {/** Search Bar */}\n          <div\n            className=\"src-dst fixed-top\"\n            id=\"src-bar\"\n            style={{\n              height: this.state.selectNavigation === true ? \"167px\" : \"57px\"\n            }}\n          >\n            <div className=\"row w-100  mx-auto\">\n              <div className=\"col-12 p-0\">\n                <Typeahead\n                  required\n                  placeholder={`${this.state.selectedVenue}`}\n                  filterBy={[\"venueName\"]}\n                  labelKey={option => {\n                    return `${option.venueName.split(/(?=[A-Z])/).join(\" \")}`;\n                  }}\n                  onChange={e => {\n                    if (e.length > 0) {\n                      this.handleVenueChange(e);\n                    }\n                  }}\n                  disabled={false}\n                  id=\"source\"\n                  value={this.state.selectedVenue}\n                  options={this.state.venueList}\n                  name=\"list\"\n                  className=\"mb-2 form-control-dashboard mt-1\"\n                />\n              </div>\n            </div>\n            <div className=\"mx-auto hr-line\" />\n            {this.state.selectNavigation === true ? (\n              <React.Fragment>\n                <div className=\"row w-100  mx-auto mt-3\">\n                  <div className=\"col-12 p-0\">\n                    <button\n                      className=\"btn-nvgtn text-white\"\n                      onClick={() => {\n                        this.props.navContent(\"SELECT DESTINATION\", () => {});\n                      }}\n                    >\n                      <img\n                        className=\"float-left mt-2 mr-2\"\n                        src=\"/inclunav/assets/images/profile.svg\"\n                        alt=\"user location\"\n                      />\n                      <Typeahead\n                        required\n                        placeholder={`Select Source`}\n                        filterBy={[\"name\"]}\n                        labelKey={option => {\n                          let resp = this.sourceLabel(option);\n                          return resp;\n                        }}\n                        renderMenuItemChildren={option => {\n                          return this.renderSourceMenu(option);\n                        }}\n                        onChange={e => {\n                          if (e.length > 0) {\n                            \n                            this.setState({\n                              srcName:e[0].name + \" \" + e[0].floor + \" \" + e[0].buildingName,\n                              srcData: e[0]\n                            });\n                          }\n                        }}\n                        disabled={false}\n                        id=\"source\"\n                        value={this.state.srcName}\n                        options={this.state.venueNavigation}\n                        name=\"list\"\n                        className=\"mb-2 form-control-dashboard mt-1\"\n                      />\n                    </button>\n                  </div>\n                </div>\n                <div className=\"mx-auto hr-line\" />\n                <div className=\"row w-100 mx-auto\">\n                  <div className=\"col-12 p-0\">\n                    <button\n                      className=\"btn-nvgtn text-white\"\n                      onClick={() => {\n                        this.props.navContent(\"SELECT DESTINATION\", () => {});\n                      }}\n                    >\n                      <img\n                        className=\"float-left mt-2 mr-2 my-auto\"\n                        src=\"/inclunav/assets/images/navigation.svg\"\n                        alt=\"select destination\"\n                      />\n                      <Typeahead\n                        required\n                        placeholder={`Select Destination`}\n                        filterBy={[\"name\"]}\n                        labelKey={option => {\n                          let resp = this.sourceLabel(option);\n                          return resp;\n                        }}\n                        renderMenuItemChildren={option => {\n                          return this.renderSourceMenu(option);\n                        }}\n                        onChange={e => {\n                          if (e.length > 0) {\n                            this.setState(\n                              {\n                                dstName: e[0].name + \" \" + e[0].floor + \" \" + e[0].buildingName,\n                                dstData: e[0],\n                                navigationStrt:true,\n                                samefloor:e[0].floor !== this.state.srcData.floor?false:true\n                              },\n                              () => {\n                                // this.mapReferencePoint()\n                                // this.handleLocalGlobal();\n                                mod.render();\n                                mod.onOpenModal();\n                                \n                              }\n                            );\n                          }\n                        }}\n                        disabled={false}\n                        id=\"source\"\n                        value={this.state.dstName}\n                        options={this.state.venueNavigation}\n                        name=\"list\"\n                        className=\"mb-2 form-control-dashboard mt-1\"\n                      />\n                    </button>\n                  </div>\n                </div>\n              </React.Fragment>\n            ) : null}\n          </div>\n\n          <div\n            class=\"btn-group-vertical glbl-btn mr-2\"\n            role=\"group\"\n            aria-label=\"First group\"\n          >\n            {srtdFlr &&\n              srtdFlr.map((r, i) => {\n                return (\n                  <button\n                    type=\"button\"\n                    // className={\"btn btn-secondary\"}                    \n                    className={this.state.currentFloor ===r?\"btn btn-secondary active active1\":\"btn btn-secondary\"}\n                    onClick={() => {\n                      this.setState({\n                        currentFloor:r\n                      },()=>{\n                        if(this.state.srcData.floor === this.state.currentFloor){\n                          this.setState({\n                            pathgeoJSON:this.srcFloorSp,\n                            geoJSON:this.state.srcFloorLandMark,\n                            instructions:this.state.srcFlrInstructions\n                          })\n                        }else{\n                          this.setState({\n                            pathgeoJSON:this.dstFloorSp,\n                            geoJSON:this.state.dstFloorLandMark,\n                            instructions:this.state.dstFlrInstructions\n                          })\n                          // srcFloorSp:,\n                          // dstFloorSp:,\n                          // pathgeoJSON:this.srcFloorSp,\n                        }\n                      })\n                    }}\n                  >\n                    L{i}\n                  </button>\n                );\n              })}\n          </div>\n\n          <div\n            class=\"btn-group-vertical glbl-hm-btn mr-2\"\n            role=\"group\"\n            aria-label=\"First group\"\n          >\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              onClick={() => {\n                this.props.history.push(\"/navigate\");\n              }}\n            >\n              <i className=\"fa fa-home\" />\n            </button>\n          </div>\n          <MapContainer\n            style={{ height: \"100vh\" }}\n            center={center}\n            zoom={this.state.zoom}\n            ref={m => {\n              this.leafletMap = m;\n            }}\n            onZoomEnd={e => {\n              // Zoom in & out control\n              if (e.target._zoom < 21.2) {\n                //remove all layers from map\n                this.setState({\n                  showpath: false\n                });\n              }\n              if (e.target._zoom < 20) {\n                //remove all layers from map\n                this.setState({\n                  showMarker: false,\n                  showpath: false\n                });\n              }\n              if (e.target._zoom < 20) {\n                //remove all layers from map\n                this.setState({\n                  showServices: false\n                });\n              } else {\n              }\n              //adding non-room layers beyond 20 zoom\n              if (e.target._zoom > 19 && !this.state.showpath) {\n                this.setState({\n                  showMarker: true\n                });\n              }\n\n              if (e.target._zoom > 21.2 && !this.state.showpath) {\n                this.setState({\n                  showpath: true\n                });\n              }\n\n              if (e.target._zoom > 20 && !this.state.showpath) {\n                this.setState({\n                  showServices: true\n                });\n              } else {\n              }\n            }}\n          >\n            <TileLayer\n              attribution=\"&copy; <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors\"\n              url={\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}\n              maxZoom={25}\n              maxNativeZoom={19}\n            />\n            {this.state.floorSelect ? null : (\n              <React.Fragment>\n                {this.state.buildingList &&\n                  this.state.buildingList.map(r => {\n                    return (\n                      <Marker\n                        position={{ lat: r.lat, lng: r.lng }}\n                        onClick={this.getData.bind(this, r.buildingName)}\n                      >\n                        <Popup position={{ lat: r.lat, lng: r.lng }}>\n                          Building Name:\n                          <pre>{r.buildingName}</pre>\n                        </Popup>\n                      </Marker>\n                    );\n                  })}\n              </React.Fragment>\n            )}\n            {this.state.showMarker ? (\n              <React.Fragment>\n                {this.state.geoJSON.features &&\n                  this.state.geoJSON.features.map((position, idx) => {\n                    switch (position.properties.floorElement) {\n                      case \"Rooms\":\n                        return (\n                          <Marker\n                            position={[\n                              position.geometry.coordinates[1],\n                              position.geometry.coordinates[0]\n                            ]}\n                          >\n                            <Popup>\n                              <span className=\"font-weight-bold\">\n                                {position.properties.name}\n                              </span>\n                              <div\n                                class=\"btn-group btn-block\"\n                                role=\"group\"\n                                aria-label=\"Basic example\"\n                              >\n                                <button\n                                  class=\"btn btn-primary\"\n                                  onClick={e => {\n                                    this.handleCall(e, position);\n                                  }}\n                                >\n                                  <i class=\"fa fa-phone\"></i>\n                                </button>\n                                <button\n                                  class=\"btn btn-primary\"\n                                  onClick={e => {\n                                    this.handleInternet(e, position);\n                                  }}\n                                >\n                                  <i class=\"fa fa-globe\"></i>\n                                </button>\n                                <button\n                                  class=\"btn btn-primary\"\n                                  onClick={e => {\n                                    this.handleWhatsapp(e, position);\n                                  }}\n                                >\n                                  <i class=\"fa fa-whatsapp\"></i>\n                                </button>\n                                <button\n                                  class=\"btn btn-primary\"\n                                  onClick={e => {\n                                    this.handleEmail(e, position);\n                                  }}\n                                >\n                                  <i class=\"fa fa-envelope\"></i>\n                                </button>\n                                <button\n                                  class=\"btn btn-primary\"\n                                  onClick={e => {\n                                    this.handleInfo(e, position);\n                                  }}\n                                >\n                                  <i class=\"fa fa-info\"></i>\n                                </button>\n                                <button class=\"btn btn-primary\">\n                                  <i class=\"fa fa-plus-square\"></i>\n                                </button>\n                              </div>\n                            </Popup>\n                          </Marker>\n                        );\n                      case \"Services\":\n                        if (this.state.showServices) {\n                          switch (position.properties.type) {\n                            case \"drinkingWater\":\n                              return (\n                                <Marker\n                                  position={[\n                                    position.geometry.coordinates[1],\n                                    position.geometry.coordinates[0]\n                                  ]}\n                                  icon={watericon}\n                                >\n                                  <Popup>\n                                    <span>{position.properties.name}</span>\n                                  </Popup>\n                                </Marker>\n                              );\n                            case \"restRoom\":\n                              switch (position.properties.washroomType) {\n                                case \"Male\":\n                                  return (\n                                    <Marker\n                                      position={[\n                                        position.geometry.coordinates[1],\n                                        position.geometry.coordinates[0]\n                                      ]}\n                                      icon={male_toileticon}\n                                    >\n                                      <Popup>\n                                        <span>{position.properties.name}</span>\n                                      </Popup>\n                                    </Marker>\n                                  );\n                                case \"Female\":\n                                  return (\n                                    <Marker\n                                      position={[\n                                        position.geometry.coordinates[1],\n                                        position.geometry.coordinates[0]\n                                      ]}\n                                      icon={female_toileticon}\n                                    >\n                                      <Popup>\n                                        <span>{position.properties.name}</span>\n                                      </Popup>\n                                    </Marker>\n                                  );\n                                default:\n                                  return (\n                                    <Marker\n                                      position={[\n                                        position.geometry.coordinates[1],\n                                        position.geometry.coordinates[0]\n                                      ]}\n                                    >\n                                      <Popup>\n                                        <span>{position.properties.name}</span>\n                                      </Popup>\n                                    </Marker>\n                                  );\n                              }\n                            default:\n                              return null;\n                          }\n                        }\n                        break;\n                      case \"FloorConnection\":\n                        switch (position.properties.type) {\n                          case \"stairs\":\n                            return (\n                              <Marker\n                                position={[\n                                  position.geometry.coordinates[1],\n                                  position.geometry.coordinates[0]\n                                ]}\n                                icon={stairicon}\n                              >\n                                <Popup>\n                                  <span>{position.properties.name}</span>\n                                </Popup>\n                              </Marker>\n                            );\n                          case \"lift\":\n                            return (\n                              <Marker\n                                position={[\n                                  position.geometry.coordinates[1],\n                                  position.geometry.coordinates[0]\n                                ]}\n                                icon={lifticon}\n                              >\n                                <Popup>\n                                  <span>{position.properties.name}</span>\n                                </Popup>\n                              </Marker>\n                            );\n                          default:\n                            return null;\n                        }\n                      default:\n                        return null;\n                    }\n                  })}\n              </React.Fragment>\n            ) : null}\n            \n            {/* <GeoJSON\n              key={hash(this.state.geoJSONPoly)}\n              data={this.state.geoJSONPoly}\n            /> */}\n\n            {this.state.samefloor && this.state.polygons && this.state.polygons.map(r=>{\n              return <GeoJSON\n              key={hash(r.geoJSONPoly)}\n              data={r.geoJSONPoly}\n            />\n            })}\n            {!this.state.samefloor?\n             <GeoJSON\n              key={hash(this.state.currentFloor === this.state.srcData.floor? this.state.srcFloorPoly:this.state.dstFloorPoly)}\n              data={this.state.currentFloor === this.state.srcData.floor? this.state.srcFloorPoly:this.state.dstFloorPoly}\n            />:\n            null\n            }\n            {/* {this.state.showpath ? (\n              <React.Fragment>\n                <Marker\n                  position={[\n                    this.state.srcData.geometry.coordinates[1],\n                    this.state.srcData.geometry.coordinates[0]\n                  ]}\n                  icon={source}\n                >\n                  <Popup>\n                    <span className=\"font-weight-bold\">\n                      {this.state.srcData.properties.name}\n                    </span>\n                    <div\n                      class=\"btn-group btn-block\"\n                      role=\"group\"\n                      aria-label=\"Basic example\"\n                    >\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleCall(e, [\n                            this.state.srcData.geometry.coordinates[1],\n                            this.state.srcData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-phone\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleInternet(e, [\n                            this.state.srcData.geometry.coordinates[1],\n                            this.state.srcData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-globe\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleWhatsapp(e, [\n                            this.state.srcData.geometry.coordinates[1],\n                            this.state.srcData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-whatsapp\"></i>\n                      </button>\n                      <button class=\"btn btn-primary\">\n                        <i class=\"fa fa-envelope\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleInfo(e, [\n                            this.state.srcData.geometry.coordinates[1],\n                            this.state.srcData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-info\"></i>\n                      </button>\n                      <button class=\"btn btn-primary\">\n                        <i class=\"fa fa-plus-square\"></i>\n                      </button>\n                    </div>\n                  </Popup>\n                </Marker>\n                <Marker\n                  position={[\n                    this.state.dstData.geometry.coordinates[1],\n                    this.state.dstData.geometry.coordinates[0]\n                  ]}\n                  icon={destination}\n                >\n                  <Popup>\n                    <span className=\"font-weight-bold\">\n                      {this.state.srcData.properties.name}\n                    </span>\n                    <div\n                      class=\"btn-group btn-block\"\n                      role=\"group\"\n                      aria-label=\"Basic example\"\n                    >\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleCall(e, [\n                            this.state.dstData.geometry.coordinates[1],\n                            this.state.dstData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-phone\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleInternet(e, [\n                            this.state.dstData.geometry.coordinates[1],\n                            this.state.dstData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-globe\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleWhatsapp(e, [\n                            this.state.dstData.geometry.coordinates[1],\n                            this.state.dstData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-whatsapp\"></i>\n                      </button>\n                      <button class=\"btn btn-primary\">\n                        <i class=\"fa fa-envelope\"></i>\n                      </button>\n                      <button\n                        class=\"btn btn-primary\"\n                        onClick={e => {\n                          this.handleInfo(e, [\n                            this.state.dstData.geometry.coordinates[1],\n                            this.state.dstData.geometry.coordinates[0]\n                          ]);\n                        }}\n                      >\n                        <i class=\"fa fa-info\"></i>\n                      </button>\n                      <button class=\"btn btn-primary\">\n                        <i class=\"fa fa-plus-square\"></i>\n                      </button>\n                    </div>\n                  </Popup>\n                </Marker>\n              </React.Fragment>\n            ) : null} */}\n\n            {this.state.showpath &&\n              this.state.pathgeoJSON.features &&\n              this.state.pathgeoJSON.features.map((position, idx) => {\n                return (\n                  <Marker\n                    position={[\n                      position.geometry.coordinates[0],\n                      position.geometry.coordinates[1]\n                    ]}\n                    icon={doticon}\n                  ></Marker>\n                );\n              })}\n          </MapContainer>\n          <BottomBar\n            srcName={this.state.srcName}\n            dstName={this.state.dstName}\n            dstData={this.state.dstData}\n            handleInstr={() => {\n              this.setState({\n                showInstructions: true\n              });\n            }}\n          />\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    getImage: state.imgDetails,\n    allNodes: state.getAllElem,\n    flrList: state.floorList,\n    userProfile: state.userPortfolio,\n    navigationInfo: state.navigationInfo,\n    vnList: state.venueList,\n    bldList: state.buildingList,\n    gpsLocation: state.gpsLocation,\n    androidNav: state.globalNavigation,\n    globalRoutes: state.osmRoutes,\n    pickupPoint: state.pickupPoints,\n    currentTab: state.navContent,\n    globalCoords: state.refPoint\n  };\n};\n\nexport default connect(mapStateToProps, {\n  floorList,\n  imgDetails,\n  getAllBuildingElements,\n  venueList,\n  buildingList,\n  getGpsLocation,\n  globalNavigation,\n  getUserPortfolio,\n  osmRoutes,\n  pickupPoints,\n  navContent,\n  refPoint\n})(GlobalView);\n"]},"metadata":{},"sourceType":"module"}